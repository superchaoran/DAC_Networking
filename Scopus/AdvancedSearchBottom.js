;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.advance=({"JS_ALERT_ADV_SRCH_DEC_WIDTH_TOOLTIP":p("Click to decrease the width of the search box"),"JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP":p("Click to increase the width and height of the search box"),"JS_ALERT_ADV_SRCH_NO_SRCH_TERM":p("No search terms entered.\r\nEnter one or more search terms and click Search."),"JS_ALERT_ADV_SRCH_INC_WIDTH_TOOLTIP":p("Click to increase the width of the search box"),"JS_ALERT_ADV_SRCH_DEC_HEIGHT_TOOLTIP":p("Click to decrease the height of the search box"),"JS_ALERT_ADV_SRCH_INC_HEIGHT_TOOLTIP":p("Click to increase the height of the search box"),"JS_ALERT_ADV_SRCH_EX_NAME":p("Name:&nbsp;"),"JS_ALERT_ADV_SRCH_NO_OUTLINE":p("No search terms entered.\r\nEnter one or more search terms and click Outline query button."),"JS_ALERT_ADV_SRCH_MOREINFO":p("more info"),"JS_ALERT_ADV_SRCH_EX_CODE":p("Code:&nbsp;"),"JS_ALERT_ADV_SRCH_DEC_WIDTH_HEIGHT_TOOLTIP":p("Click to decrease the width and height of the search box"),"JS_ALERT_ADV_SRCHFOR":p("Search for...")})})();;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.messages=({"BASI_EG_CAP":p("E.g.,"),"BASI_CHOOSIN_28":p("disables the other search and limit options on this search page."),"SAVED_SEARCH_CLICK":p("Click {0} 'Perform a search' {1} to create a New Saved search"),"BASI_SEARCHTIPS_TOOLTIP":p("Search tips (Opens in a new window)"),"BASI_BEFORE":p("Before"),"SAVED_SEARCH_EXAMPLE":p("e.g. (#1 AND #2) AND NOT #3"),"HIST_LEARN_MORE_COMBINING":p("Learn more about combining queries (opens in a new window)"),"SAVED_SEARCH_NEW_RESULT":p("New results"),"BASI_PUBLISH_56":p("published End Date Range"),"search":{"history":{"error":{"searchnotfound":p("The Search number used was not found in Search history.",({"check":p("Please check your Combine queries entry.")})),"deletethis":p("Are you sure you want to delete this search?"),"nosearchesfound":p("No searches were referenced in your Combine queries entry."),"deletes":p("Are you sure you want to delete this searches?")}},"error":{"search":{"required":p("No search terms entered.",({"enter":p("Enter one or more search terms and click Search.")}))}},"data":{"error":{"nosearch":p("Please enter a search query, e.g. (#1 and #2) NOT #3.")}}},"HIST_TITLESH_12":p("Show the results for this search"),"BASI_PUBLISH_54":p("Published"),"BASI_SEARCHC_TOOLTIP":p("Search Connector"),"BASI_SYNTAX_ERROR11":p("Please re-enter your information, and if the syntax error occurs again, please contact your help desk or system administrator."),"BASI_AUTHORS":p("Authors"),"SAVED_SEARCH_SELECT_ALL":p("Select all saved searches"),"HIST_NO_SEARCH_QUERY_ENTERED":p("No search query entered."),"BASI_DOI":p("DOI"),"PERFORM_SEARCH_TITLE":p("Perform a search in the document search form"),"HIST_MOST_RECENT":p("Showing {2} most recent searches {0}View all {1}"),"SAVED_SEARCH_ALL_RESULTS_TITLE":p("Retrieve all results"),"BASI_TITLE-ABS-KEY-AUTH":p("Article Title, Abstract, Keywords, Authors"),"SUBJECT_AREA_LFSC_DISPLAY_COUNT":p("&gt; 4,300 titles"),"BASI_CODEN":p("CODEN"),"BASI_REF":p("References"),"savelist":{"select":p("Select:"),"your":{"saved":{"list":p("Your Saved Lists")}},"message5":p("Are you sure you want to delete the selected saved list?"),"message6":p("No Saved Lists were selected."),"cancel":{"title":p("Go back to previous page")},"message3":p("Please check one or more Saved Searches from the list below and click delete."),"message4":p("Enter a search query and click Search."),"message1":p("Select whether you would like to save the documents in a New List or add them to a Saved List."),"message2":p("No Saved Searches were selected."),"message":p("Save the {0} selected documents from your list."),"title":p("Save List"),"message8":p("Delete the selected Saved Lists"),"name":p("Name:"),"message7":p("Select one or more lists from overview below and click delete."),"example":p("E.g., Brain research articles")},"SEARCH_HIST_COL_LABEL":p("Search"),"BASI_ADDEDTO_58":p("Added to Scopus in the last"),"BASI_TITLE":p("Article Title"),"BASI_TITLE_49":p("TITLE"),"HIST_DELETE_11":p("Delete"),"BASI_AFFIL":p("Affiliation"),"BASI_SOCIAL_SCI":p("Social Sciences."),"BASI_SEARCHC_45":p("Search Connectors"),"BASI_RESETFO_67":p("Reset form"),"BASI_EG034HE_39":p("Eg., &#034;heart attack&#034; AND stress"),"HIST_MOST_RECENT_TITLE":p("Select to view all recent searches"),"BASI_LIMITTO_53":p("Limit to Date range by published years"),"BASI_CASREGNUMBER":p("CAS Number"),"MESS_YOURQUE_70":p("Your query:"),"BASI_LIMITTO_57":p("Limit to Date range by newly added to scopus"),"BASI_DOCUMEN_32":p("Document search"),"BASI_AFFILORG":p("&nbsp; &nbsp; Affiliation Name"),"BASI_TITLEGO_30":p("Go back to the previous page"),"BASI_INCLUSI_52":p("(inclusive)"),"HIST_EDIT_10":p("Edit"),"BASI_AFFILIATIONS":p("Affiliations"),"BASI_ADVANCE_35":p("Advanced search"),"BASI_ADDS_FIELD":p("Add search field"),"HIST_CLICK_GO":p("Enter a search query and click Go."),"HIST_SEARCH_5":p("Search"),"SUBJECT_AREA_PHSC_DISPLAY_COUNT":p("&gt; 7,200 titles"),"BASI_LIMITTO_50":p("Limit to:"),"HIST_RESULTS_6":p("Results"),"BASI_BACK":p("Back"),"BASI_REMOVET_65":p("Remove this search field."),"BASI_ENSURE_START_END":p("Please ensure the start year is earlier than the end year."),"SAVE_ALLRESU_88":p("All results"),"SAVED_SEARCH_COMB_QUERIES":p("Combining queries"),"BASI_SECONDS_43":p("second search term"),"HIST_ALL_RECENT":p("Showing all recent searches {0}View {2} most recent only{1}"),"BASI_SUBJECT_61":p("Subject Areas"),"BASI_CONF":p("Conference"),"BASI_SEARCH_ALL_YEARS":p("All years"),"BASI_SUBJECT_62":p("Subjects"),"HIST_SETFEED_7":p("Set feed"),"HIST_DOC_RESULTS":p("document results"),"SOURCE_SUBJECT":p("All Subjects"),"SUBJECT_AREA_SOSC_DISPLAY_COUNT":p("&gt; 5,300 titles"),"BASI_IN_40":p("in"),"BASI_AFFILCOUNTRY":p("&nbsp; &nbsp; Affiliation Country"),"SAVED_SEARCH_SOURCE_LABEL":p("Source"),"BASI_SEARCHT_38":p("Search term"),"BASI_AFFILIA_34":p("Affiliation search"),"BASI_DATERAN_51":p("Date Range"),"HIST_CLASSIC_14":p("Save query"),"HIST_CLASSIC_16":p("Edit query"),"BASI_SRCH_TABS_TOOLTIP_1":p("Select to search for documents."),"HIST_CLASSIC_18":p("Delete query"),"BASI_SRCH_TABS_TOOLTIP_3":p("Select to search for affiliations."),"BASI_RESETFO_LINK":p("Reset form"),"BASI_SRCH_TABS_TOOLTIP_2":p("Select to search for authors."),"NO_SAVED_SEARCH":p("You have not saved any searches yet"),"BASI_AUTHORS_33":p("Author search"),"HIST_SAVE_9":p("Save"),"HIST_ALL_RECENT_TITLE":p("Select to view the {0} most recent searches only"),"BASI_EG":p("e.g."),"HIST_SEARCH_COMBINED_QUERIES":p("Search with combined queries"),"BASI_SRCH_TABS_TOOLTIP_4":p("Select to perform advanced queries."),"BASI_PHYSICAL_SCI":p("Physical Sciences."),"BASI_NSEARCH_46":p("n search terms"),"BASI_ALL":p("All Fields"),"SAVE_PERFORM_78":p("Perform a search"),"SAVED_SEARCH_ACTIONS_LABEL":p("Actions"),"BASI_ADDED_LASTNUM":p("Added to Scopus in the last Number of days"),"BASI_ABS":p("Abstract"),"BASI_CLEAR_66":p("clear"),"MESS_PLEASER_66":p("Please re-enter your information, and if the syntax error occurs again, please contact your help desk or system administrator."),"HIST_COMB_QUERIES":p("Combining queries..."),"savedlist":{"documents":p("Documents"),"select":{"all":p("Select all Saved Lists")},"or":p("Or"),"no":{"list":{"message":p("You have not saved any lists yet."),"message1":p("To save a list, click the {0} Save this List {1} link on the {2} My list {3} page.")}},"rename":p("Rename",({"title":p("Change the name of this list"),"your":{"list":p("Rename your saved list:")},"list":{"heading":p("Rename my saved list")}})),"datecreated":p("Date created"),"list":{"title":p("View the documents in this list"),"name":p("List name:")},"mylist":{"title":p("My list")},"header":p("Saved lists"),"listname":p("List name")},"HIST_COMBINE_4":p("Combine queries..."),"BASI_TO_55":p("to"),"BASI_LANGUAGE":p("Language"),"BASI_PUBLISHED_STARTR":p("Published start date range"),"HIST_SEARCHH_3":p("Search history"),"BASI_CHOOSING":p("choosing"),"BASI_AUTHOR-NAME":p("Authors"),"BASI_ALL_CAPS":p("ALL"),"BASI_SYNTAX_ERROR":p("The search contains a syntax error"),"SUBJECT_AREA_HLSC_DISPLAY_COUNT":p("&gt; 6,800 titles"),"SAVED_SEARCH_NEW_RESULT_TITLE":p("Retrieve new results since the last run"),"BASI_KEY_51":p("KEY"),"BASI_LIFE_SCIENCES":p("Life Sciences."),"BASI_ADDS_FIELD_TOOLTIP":p("Add search field"),"BASI_PLEASEN_27":p("Please note:"),"BASI_LANGUAG_54":p("LANGUAGE"),"HIST_SETALER_8":p("Set alert"),"BASI_THESTAR_33":p("The start year in the date range you specified is later than the end year."),"BASI_RESET_THEFORM":p("Reset the form"),"BASI_TITLE-ABS-KEY":p("Article Title, Abstract, Keywords"),"SAVED_SEARCH":p("Saved searches"),"BASI_SEARCHF_47":p("search field type for n search terms"),"BASI_DAYS_59":p("days"),"SAVED_SEARCH_LAST_RUN_LABEL":p("Last run on"),"BASI_SEARCHF_44":p("search field type for second search term"),"BASI_DOCUMEN_60":p("Document Type"),"BASI_AFFILCITY":p("&nbsp; &nbsp; Affiliation City"),"BASI_KEY":p("Keywords"),"BASI_SEARCH_TIPS":p("Search tips"),"BASI_ISSN":p("ISSN"),"BASI_FIRSTAUTH":p("First Author"),"BASI_NO_TERM":p("No search term entered"),"BASI_REMOVE_SEARCHF_TOOLTIP":p("Remove this search field."),"BASI_RESETFO_TOOLTIP":p("Reset form"),"BASI_SRCTITLE":p("Source Title"),"BASI_PRESENT_32":p("Present"),"HIST_ENTER_EXAMPLE_TEXT":p("e.g. #1 AND NOT #3. "),"BASI_CHEMNAME":p("Chemical Name"),"BASI_SEARCH_TXT_TOOLTIP":p("Search Terms Text"),"BASI_HEALTH_SCI":p("Health Sciences."),"BASI_SEARCHF_37":p("Search for..."),"BASI_SEARCHF_TOOLTIP":p("Search Field Type"),"BASI_TEST_SEARCH":p("Test Search"),"SAVED_SEARCH_COMBINE_4":p("Combine queries")})})();;(function(){function r(val,args){for(var x=0;x<args.length;x++){val=val.replace('{'+x+'}',args[x]);}
return val;}
function p(){var val=arguments[0];var ret;if(val.indexOf('{0}')!=-1)
ret=function(){return r(val,arguments);}
else ret=function(){return val;}
for(var x=1;x<arguments.length;x++){for(var a in arguments[x])
ret[a]=arguments[x][a];}
return ret;}
window.error=({"js":{"message":{"search":{"syntax":{"orcid":{"format":{"message":p("To search by ORCID ID, please use the format: xxxx-xxxx-xxxx-xxxx.")}}},"error":{"invalid":{"syntax":p("<span>The search contains a syntax error.<\/span>")}}}}}})})();function writeXmlHttpRequestCookie()
{document.cookie="xmlHttpRequest=true; path=/";}
if(Ajax.getTransport())writeXmlHttpRequestCookie();Ajax.Responders.register({onCreate:function(request,transport,json){if(request&&request.options&&request.options.onLoadingMessage)
{request.options.onLoadingMessage(request.containers.success);}
if(request&&request.options&&request.options.loadingMessage&&request.containers)
{request.containers.success.innerHTML=request.options.loadingMessage;}},onLoaded:function(request,transport,json){if(request&&request.options&&request.options.onLoadingCompleteMessage)
{request.options.onLoadingCompleteMessage(request.containers.success);}
if(request&&request.options&&request.options.loadingCompleteMessage&&request.containers)
{request.containers.success.innerHTML=request.options.loadingCompleteMessage;}},onComplete:function(request,transport,json){if(Ajax.activeRequestCount==0)
{}}});function internalServerErrorHandler(request){if(request.getResponseHeader("sessionExpired")=="true")
{window.location="../standard/sessionexpired.url";}}
var checkEmpty=false;var lastRow=4;var textNode;var linksDisplayFlag=false;var addSearchLink;var addSearch;var reset;var isIE7=jQuery.browser.msie&&+jQuery.browser.version===7;var isIE8=jQuery.browser.msie&&+jQuery.browser.version===8;var isIE9=jQuery.browser.msie&&+jQuery.browser.version===9;var srchFor=jQuery(window['basic']).length?basic.BASI_SEARCHF_37():'';var ddlValue=jQuery(window['basic']).length?basic.BASI_EG034HE_39():'';var lastChecked="";function disableBasicFormFields(id,dodisable){if(lastChecked!=""&&lastChecked!=id&&!dodisable)
return;lastChecked=id;var dColor="#999999";var isChecked=dodisable;if(id=="authorsearch2"){if(document.getElementById('field2').value=='AFFIL'){if(!isChecked){dColor="";document.getElementById('affiliationSelectionMsg').style.display="none";}else{document.getElementById('affiliationSelectionMsg').style.display="block";document.getElementById('authorSelectionMsg').style.display="none";}}else{if(!isChecked){dColor="";document.getElementById('authorSelectionMsg').style.display="none";}else{document.getElementById('authorSelectionMsg').style.display="block";document.getElementById('affiliationSelectionMsg').style.display="none";}}
document.getElementById('inText1').style.color=dColor;document.getElementById('example1').style.color=dColor;document.getElementById('authorLookupDivOne').style.color=dColor;document.getElementById('authorsearch1').disabled=isChecked;document.getElementById('field1').disabled=isChecked;document.getElementById('searchterm1').disabled=isChecked;document.getElementById('connector').disabled=isChecked;make_enterable(document.getElementById('authorsearch2'));make_enterable(document.getElementById('field2'));make_enterable(document.getElementById('searchterm2'));make_enterable(document.getElementById('connector'));}else{if(document.getElementById('field1').value=='AFFIL'){if(!isChecked){dColor="";document.getElementById('affiliationSelectionMsg').style.display="none";}else{document.getElementById('affiliationSelectionMsg').style.display="block";document.getElementById('authorSelectionMsg').style.display="none";}}else{if(!isChecked){dColor="";document.getElementById('authorSelectionMsg').style.display="none";}else{document.getElementById('authorSelectionMsg').style.display="block";document.getElementById('affiliationSelectionMsg').style.display="none";}}
document.getElementById('inText2').style.color=dColor;document.getElementById('authorLookupDivTwo').style.color=dColor;document.getElementById('authorsearch2').disabled=isChecked;document.getElementById('field2').disabled=isChecked;document.getElementById('searchterm2').disabled=isChecked;document.getElementById('connector').disabled=isChecked;make_enterable(document.getElementById('authorsearch1'));make_enterable(document.getElementById('field1'));make_enterable(document.getElementById('searchterm1'));make_enterable(document.getElementById('connector'));}
document.getElementById('Limit to').style.color=dColor;document.getElementById('Published').style.color=dColor;document.getElementById('to').style.color=dColor;document.getElementById('dRange').style.color=dColor;document.getElementById('days').style.color=dColor;document.getElementById('Document Type').style.color=dColor;document.getElementById('Added to Scopus in the last').style.color=dColor;document.getElementById('Subject Areas').style.color=dColor;document.getElementById('Load Date Type').disabled=isChecked;document.getElementById('Pub Date Type').disabled=isChecked;document.getElementById('documenttype').disabled=isChecked;document.getElementById('yearFrom').disabled=isChecked;document.getElementById('yearTo').disabled=isChecked;document.getElementById('loadDate').disabled=isChecked;if(!isChecked){make_enterable(document.getElementById('Load Date Type'));make_enterable(document.getElementById('Pub Date Type'));make_enterable(document.getElementById('documenttype'));make_enterable(document.getElementById('yearFrom'));make_enterable(document.getElementById('yearTo'));make_enterable(document.getElementById('loadDate'));}
for(var i=0;i<document.forms['BasicValidatedSearchForm'].subjects.length;i++){document.forms['BasicValidatedSearchForm'].subjects[i].disabled=isChecked;if(!isChecked)
make_enterable(document.forms['BasicValidatedSearchForm'].subjects[i]);document.getElementById(document.forms['BasicValidatedSearchForm'].subjects[i].id+' Label').style.color=dColor;document.getElementById(document.forms['BasicValidatedSearchForm'].subjects[i].id+' Count').style.color=dColor;if(document.getElementById(document.forms['BasicValidatedSearchForm'].subjects[i].id+' Comment')){document.getElementById(document.forms['BasicValidatedSearchForm'].subjects[i].id+' Comment').style.color=dColor;}}}
function make_enterable(input){input.onkeypress=function(e){var pressedkey=-1;if(typeof event!='undefined'){pressedkey=window.event.keyCode;}else{pressedkey=e.keyCode;}
if(pressedkey==13){document.forms['BasicValidatedSearchForm'].submit();}};}
function setCheckEmpty(state){var textInputPattern="searchterm";var textNode,textNodeName,textNodeValue;var swapCodes=new Array(8211,8212,8216,8217,8220,8221,8226,8230);var swapStrings=new Array("--","--","'","'","\"","\"","*","...");var nodes=document.querySelectorAll("input[type=text]");for(var i=0;i<nodes.length;i++){textNode=nodes[i];textNodeName=textNode.name.toLowerCase();if(textNodeName.indexOf(textInputPattern)!=-1){textNodeValue=textNode.value;for(var j=0;j<swapCodes.length;j++){var swapper=new RegExp("\\u"+swapCodes[j].toString(16),"g");textNodeValue=textNodeValue.replace(swapper,swapStrings[j]);}
textNode.value=textNodeValue;}}
checkEmpty=state;}
function setAdvCheckEmpty(state){checkEmpty=state;var searchText=jQuery("#searchfield").text();searchText=searchText.replace(/\s{2,}/g,' ');searchText=searchText.replace(/(\r\n|\n|\r)/gm,' ');var swapCodes=new Array(8211,8212,8216,8217,8220,8221,8226,8230);var swapStrings=new Array("--","--","'","'","\"","\"","*","...");var output=searchText;for(var i=0;i<swapCodes.length;i++){var swapper=new RegExp("\\u"+swapCodes[i].toString(16),"g");output=output.replace(swapper,swapStrings[i]);}
searchText=output;searchText=encodeURIComponent(searchText);searchText=searchText.replace(new RegExp("%C2%A0","g"),"");searchText=decodeURIComponent(searchText);if(searchText!=''){document.forms['AdvancedValidatedSearchForm'].searchfield.value=searchText;}}
function advPreviousPage(buttonName,state){checkEmpty=state;var searchText=jQuery("#searchfield").text();if(searchText!=''){document.forms['AdvancedValidatedSearchForm'].searchfield.value=jQuery.trim(searchText);}
document.AdvancedValidatedSearchForm.clickedLink.value=buttonName;document.AdvancedValidatedSearchForm.submit();}
function checkForm(){var returnVal=true;if(checkEmpty){checkEmpty=false;returnVal=checkSearchBoxes();if(returnVal){returnVal=checkDates();}}
return returnVal;}
function checkSearchBoxes(){var success=true;if(document.BasicValidatedSearchForm.searchterm2!=null){if(document.BasicValidatedSearchForm.searchterm2.disabled||(assertNotEmpty(document.BasicValidatedSearchForm.searchterm2)==false)){if((assertNotEmpty(document.BasicValidatedSearchForm.searchterm1)==false)){alert(basic.BASI_NO_TERM()+'\r\n'+basic.search.error.search.required.enter());success=false;}else{document.BasicValidatedSearchForm.searchterm1.focus();}}}else if((assertNotEmpty(document.BasicValidatedSearchForm.searchterm1)==false)){alert(basic.BASI_NO_TERM()+'\r\n'+basic.search.error.search.required.enter());success=false;}else{document.BasicValidatedSearchForm.searchterm1.focus();}
return success;}
function checkDates(){if(document.BasicValidatedSearchForm.yearFrom.disabled&&document.BasicValidatedSearchForm.yearTo.disabled&&document.BasicValidatedSearchForm.yearTo.disabled){return true;}
if(document.BasicValidatedSearchForm.yearFrom.value!='Before 1960'&&document.BasicValidatedSearchForm.yearTo.value!='Before 1960'&&document.BasicValidatedSearchForm.yearTo.value!=basic.BASI_PRESENT_32()&&parseInt(document.BasicValidatedSearchForm.yearFrom.value)>parseInt(document.BasicValidatedSearchForm.yearTo.value)){alert(basic.BASI_THESTAR_33());return false;}
return true;}
function onCheck(obj){if(obj.value=="ALL"){selectTheAllButton();}else{if(isAllselected()){selectTheAllButton();}else{deselectTheAllButton();}}}
function isAllselected(){for(var i=0;i<document.BasicValidatedSearchForm.subjects.length;i++){if((document.BasicValidatedSearchForm.subjects[i].value!="ALL")&&(document.BasicValidatedSearchForm.subjects[i].checked==false)){return false;}}
return true;}
function selectTheAllButton(){for(var i=0;i<document.BasicValidatedSearchForm.subjects.length;i++){if(document.BasicValidatedSearchForm.subjects[i].value=="ALL"){document.BasicValidatedSearchForm.subjects[i].checked=true;}else{document.BasicValidatedSearchForm.subjects[i].checked=false;}}}
function deselectTheAllButton(){for(var i=0;i<document.BasicValidatedSearchForm.subjects.length;i++){if(document.BasicValidatedSearchForm.subjects[i].value=="ALL"){document.BasicValidatedSearchForm.subjects[i].checked=false;}}}
function basicFormSubmit(tab){if(tab=="advanced"){document.BasicValidatedSearchForm.advancedTab.value="1";}else if(tab=="author"){document.BasicValidatedSearchForm.authorTab.value="1";}else if(tab=="affiliation"){document.BasicValidatedSearchForm.affiliationTab.value="1";}
document.BasicValidatedSearchForm.submit();}
function checkNotEmpty(control,message){if(checkEmpty){checkEmpty=false;return assertNotEmpty(control,message);}
return true;}
function checkAdvSrchNotEmpty(control){if(checkEmpty){checkEmpty=false;var searchObj=jQuery("#searchfield");var reg=/\S/g;var message=advance.JS_ALERT_ADV_SRCH_NO_SRCH_TERM();if(control.value==null||control.value==''||control.value.match(reg)==null){if(message!=null&&message!=''){alert(message);}
searchObj.focus();return false;}}
return true;}
function advancedFormSubmit(tab){if(tab=="basic"){document.AdvancedValidatedSearchForm.basicTab.value="1";}else if(tab=="author"){document.AdvancedValidatedSearchForm.authorTab.value="1";}else if(tab=="affiliation"){document.AdvancedValidatedSearchForm.affiliationTab.value="1";}
checkEmpty=false;document.AdvancedValidatedSearchForm.submit();}
function resetFormLink(){document.BasicValidatedSearchForm.resetFormLink.value="1";document.BasicValidatedSearchForm.submit();}
function addSearchField(){var index=lastRow+eval(document.BasicValidatedSearchForm.numberOfFields.value);var iteration=document.BasicValidatedSearchForm.numberOfFields.value;if(document.BasicValidatedSearchForm.numberOfFields.value>0){linksDisplayFlag=true;}
document.BasicValidatedSearchForm.numberOfFields.value=eval(document.BasicValidatedSearchForm.numberOfFields.value)+1;var srchTable=document.getElementById('searchTable');var searchFieldRow=document.createElement('div');srchTable.appendChild(searchFieldRow);if(document.BasicValidatedSearchForm.numberOfFields.value==1){searchFieldRow.id='searchRow2';searchFieldRow.className='searchRow paddingT10';}else{searchFieldRow.id='RowId'+iteration;searchFieldRow.className='paddingT10 searchRow';}
var cellLeft=document.createElement('div');cellLeft.className='floatL col1 ddlField connectorTxt';searchFieldRow.appendChild(cellLeft);var spanLeft=document.createElement('span');spanLeft.className='posRelative inlineBlk';cellLeft.appendChild(spanLeft);var operator=document.createElement('select');operator.className='connectorWidth select';if(document.BasicValidatedSearchForm.numberOfFields.value=='1'){operator.name='connector';operator.id='connector';}else{operator.name='connectors';operator.id='connector'+iteration;}
operator.options[0]=new Option('AND','AND');operator.options[1]=new Option('OR','OR');operator.options[2]=new Option('AND NOT','AND NOT');spanLeft.appendChild(operator);var cellRight=document.createElement('div');cellRight.className='floatL col2 txtBoxSearch';searchFieldRow.appendChild(cellRight);var srchTerm=document.createElement('input');srchTerm.className='defaultWaterMark';srchTerm.type='text';srchTerm.value='';if(document.BasicValidatedSearchForm.numberOfFields.value=='1'){srchTerm.name='searchterm2';srchTerm.id='searchterm2';}else{srchTerm.name='searchTerms';srchTerm.id='searchTerms'+iteration;}
srchTerm.size=46;srchTerm.maxLength=256;cellRight.appendChild(srchTerm);jQuery('#'+srchTerm.id).searchForPlaceholder({left:{enabled:true,value:srchFor,type:"simple",classes:"searchForTxt"},right:{enabled:false}});var cellRightSel=document.createElement('div');cellRightSel.className='floatL ddlField';searchFieldRow.appendChild(cellRightSel);var spanSel=document.createElement('span');spanSel.className='posRelative inlineBlk';cellRightSel.appendChild(spanSel);var srchField=document.createElement('select');srchField.className='field1 select';srchField.name='fields';if(document.BasicValidatedSearchForm.numberOfFields.value=='1'){srchField.name='field2';srchField.id='field2';}else{srchField.name='fields';srchField.id='fields'+iteration;}
srchField.options[0]=new Option(basic.BASI_ALL(),'ALL');srchField.options[1]=new Option(titleAbsKey,'TITLE-ABS-KEY');srchField.options[2]=new Option(authKey,'AUTHOR-NAME');srchField.options[3]=new Option(basic.BASI_FIRSTAUTH(),'FIRSTAUTH');srchField.options[4]=new Option(basic.BASI_SRCTITLE(),'SRCTITLE');srchField.options[5]=new Option(basic.BASI_TITLE(),'TITLE');srchField.options[6]=new Option(basic.BASI_ABS(),'ABS');srchField.options[7]=new Option(basic.BASI_KEY(),'KEY');srchField.options[8]=new Option(basic.BASI_AFFIL(),'AFFIL');srchField.options[9]=new Option(basic.BASI_AFFILORG().replace(/&nbsp;/g,String.fromCharCode(160)),'AFFILORG');srchField.options[10]=new Option(basic.BASI_AFFILCITY().replace(/&nbsp;/g,String.fromCharCode(160)),'AFFILCITY');srchField.options[11]=new Option(basic.BASI_AFFILCOUNTRY().replace(/&nbsp;/g,String.fromCharCode(160)),'AFFILCOUNTRY');srchField.options[12]=new Option(basic.BASI_LANGUAGE(),'LANGUAGE');srchField.options[13]=new Option(basic.BASI_ISSN(),'ISSN');srchField.options[14]=new Option(basic.BASI_CODEN(),'CODEN');srchField.options[15]=new Option(basic.BASI_DOI(),'DOI');srchField.options[16]=new Option(basic.BASI_REF(),'REF');srchField.options[17]=new Option(basic.BASI_CONF(),'CONF');srchField.options[18]=new Option(titleAbsAuthKey,'TITLE-ABS-KEY-AUTH');srchField.options[19]=new Option(basic.BASI_CHEMNAME(),'CHEMNAME');srchField.options[20]=new Option(basic.BASI_CASREGNUMBER(),'CASREGNUMBER');srchField.options[1].selected=true;spanSel.appendChild(srchField);var cellRightRemove=document.createElement('div');cellRightRemove.className='floatL';searchFieldRow.appendChild(cellRightRemove);var removeButton=document.createElement('A');removeButton.id='removeId'+iteration;removeButton.setAttribute('href','javascript:removeSearchField('+iteration+')');removeButton.setAttribute('title',basic.BASI_REMOVET_65());removeButton.className='deleteIcon';removeButton.innerHTML='&nbsp;';cellRightRemove.appendChild(removeButton);var cellRightClear=document.createElement('div');cellRightClear.className='clear';searchFieldRow.appendChild(cellRightClear);iteration=iteration+1;var resetRow=document.getElementById('search');resetLink=document.getElementById('displayResetLink');resetLink.className='basicsearchRF floatL';if(!document.getElementById('resetvar')&&!linksDisplayFlag){var resetTextLink=document.createElement('span');resetTextLink.className='marginR5';var reset=document.createElement('A');reset.setAttribute('href','javascript:resetFormLink()');reset.className='txtSmaller';reset.innerHTML=basic.BASI_RESETFO_67();resetTextLink.appendChild(reset);resetLink.appendChild(resetTextLink);resetLink.innerHTML=resetLink.innerHTML+'|';}
document.getElementById('displayResetLink').innerHTML='<div class="sep floatL">|</div> <span class="marginR5 floatL"><a href="javascript:resetFormLink()">'+basic.BASI_RESETFO_LINK()+'<input type= "hidden" name="resetFormLink"></a></span>';linksDisplayFlag=true;if(!isIE7){jQuery('select.select').selectBoxIt();jQuery('.connectorWidth span.selectboxit-text').css({'max-width':'64px'});}
if(operator&&operator.id&&jQuery('#'+operator.id+'SelectBoxIt').length){jQuery('#'+operator.id+'SelectBoxIt').focus();}}
function removeSearchField(rowNum){var srchTable=document.getElementById('searchTable');if(rowNum==0){var rowId='searchRow2';var searchTermId='searchterm2';var connectorId='connector';var fieldId='field2';var removeId='removeId0';var rowIndex;var deleteRow=document.getElementById(rowId);srchTable.removeChild(deleteRow);if(document.BasicValidatedSearchForm.numberOfFields.value>1){for(rowIndex=eval(document.BasicValidatedSearchForm.numberOfFields.value)-2;rowIndex>0;rowIndex--){document.getElementById('RowId'+eval(rowIndex+1)).id='RowId'+rowIndex;document.getElementById('connector'+eval(rowIndex+1)).name=eval(document.getElementById('connector'+rowIndex)).name;document.getElementById('connector'+eval(rowIndex+1)).id='connector'+rowIndex;document.getElementById('searchTerms'+eval(rowIndex+1)).name=eval(document.getElementById('searchTerms'+rowIndex)).name;document.getElementById('searchTerms'+eval(rowIndex+1)).id='searchTerms'+rowIndex;document.getElementById('fields'+eval(rowIndex+1)).name=eval(document.getElementById('fields'+rowIndex)).name;document.getElementById('fields'+eval(rowIndex+1)).id='fields'+rowIndex;document.getElementById('removeId'+eval(rowIndex+1)).setAttribute('href','javascript:removeSearchField('+rowIndex+')');document.getElementById('removeId'+eval(rowIndex+1)).id='removeId'+rowIndex;}
document.getElementById('RowId'+eval(rowNum+1)).id=rowId;document.getElementById('searchTerms'+eval(rowNum+1)).name='searchterm2';document.getElementById('searchTerms'+eval(rowNum+1)).id=searchTermId;document.getElementById('connector'+eval(rowNum+1)).name='connector';document.getElementById('connector'+eval(rowNum+1)).id=connectorId;document.getElementById('fields'+eval(rowNum+1)).name='field2';document.getElementById('fields'+eval(rowNum+1)).id=fieldId;document.getElementById('removeId'+eval(rowNum+1)).setAttribute('href','javascript:removeSearchField('+rowNum+')');document.getElementById('removeId'+eval(rowNum+1)).id=removeId;}}else{var rowId='RowId'+rowNum;var searchTermId='searchTerms'+rowNum;var connectorId='connector'+rowNum;var fieldId='fields'+rowNum;var removeId='removeId'+rowNum;var rowIndex;var deleteRow=document.getElementById(rowId);srchTable.removeChild(deleteRow);if(rowNum<eval(document.BasicValidatedSearchForm.numberOfFields.value)-1){for(rowIndex=document.BasicValidatedSearchForm.numberOfFields.value-2;rowIndex>rowNum;rowIndex--){document.getElementById('RowId'+eval(rowIndex+1)).id='RowId'+rowIndex;document.getElementById('connector'+eval(rowIndex+1)).name=eval(document.getElementById('connector'+rowIndex)).name;document.getElementById('connector'+eval(rowIndex+1)).id='connector'+rowIndex;document.getElementById('searchTerms'+eval(rowIndex+1)).name=eval(document.getElementById('searchTerms'+rowIndex)).name;document.getElementById('searchTerms'+eval(rowIndex+1)).id='searchTerms'+rowIndex;document.getElementById('fields'+eval(rowIndex+1)).name=eval(document.getElementById('fields'+rowIndex)).name;document.getElementById('fields'+eval(rowIndex+1)).id='fields'+rowIndex;document.getElementById('removeId'+eval(rowIndex+1)).setAttribute('href','javascript:removeSearchField('+rowIndex+')');document.getElementById('removeId'+eval(rowIndex+1)).id='removeId'+rowIndex;}
document.getElementById('RowId'+eval(rowNum+1)).id=rowId;document.getElementById('searchTerms'+eval(rowNum+1)).name='searchTerms';document.getElementById('searchTerms'+eval(rowNum+1)).id=searchTermId;document.getElementById('connector'+eval(rowNum+1)).name='connectors';document.getElementById('connector'+eval(rowNum+1)).id=connectorId;document.getElementById('fields'+eval(rowNum+1)).name='fields';document.getElementById('fields'+eval(rowNum+1)).id=fieldId;document.getElementById('removeId'+eval(rowNum+1)).setAttribute('href','javascript:removeSearchField('+rowNum+')');document.getElementById('removeId'+eval(rowNum+1)).id=removeId;}}
document.BasicValidatedSearchForm.numberOfFields.value=document.BasicValidatedSearchForm.numberOfFields.value-1;if(document.BasicValidatedSearchForm.numberOfFields.value==0){jQuery('#displayResetLink').text('');}}
function backToAlert(button){document.BasicValidatedSearchForm.clickedLink.value=button;document.BasicValidatedSearchForm.submit();}
function setWaterBasic(){jQuery('#searchterm1').searchForPlaceholder({left:{enabled:true,value:srchFor,type:"simple",classes:"searchForTxt"},right:{enabled:true,value:ddlValue,type:"simple",classes:"waterMarkOnitalic"}});jQuery('#searchterm2').searchForPlaceholder({left:{enabled:true,value:srchFor,type:"simple",classes:"searchForTxt"},right:{enabled:false}});jQuery('input[name="searchTerms"]').each(function(){var searchTermsId=jQuery(this).attr('id');jQuery('#'+searchTermsId).searchForPlaceholder({left:{enabled:true,value:srchFor,type:"simple",classes:"searchForTxt"},right:{enabled:false}});});if(!isIE7){if(jQuery('.connectorWidth span.selectboxit-text').length>0){jQuery('.connectorWidth span.selectboxit-text').css({'max-width':'64px'});}}}
jQuery(document).ready(function(){setWaterBasic();});var isIE8=jQuery.browser.msie&&+jQuery.browser.version===8;var srchFor=advance.JS_ALERT_ADV_SRCHFOR();var globalCusrsorValue=0,selectStartValue=0,selectEndValue=0,subCursor=0,startPos=0;var endPos=0,finalStartPos=-2,finalEndPos=-2,flagValue=-2,flagForEnter=false,lookupValue=0;function CodeSuggestor(){var aForm;var aSuggestBox;var aSearchfield;var realThis=this;var aValue="";this.make=function(aEvent,aObj){switch(aEvent.keyCode){case 40:return false;break;case 38:return false;default:doSuggest(aObj);break;}};this.eventHandler=function(aEvent,aObj){if(aEvent.type=='keydown'){if(aEvent.keyCode==8||aEvent.keyCode==32||(aEvent.keyCode>=48&&aEvent.keyCode<=90)||(aEvent.keyCode>=96&&aEvent.keyCode<=111)||(aEvent.keyCode>=186))
{jQuery("#outlineButton").removeAttr("disabled");jQuery("#outlineButton").attr("disabled",false);jQuery("#outlineButton").removeClass("outlineDisabled");jQuery("#outlineButton").addClass("outlineEnabled");jQuery("#clearLink").css('display','inline');jQuery("#clearLinkDiv").css({'display':'inline','color':'#B7B7B7'});}
var queryVal=jQuery("#searchfield").text();queryVal=jQuery.trim(queryVal);if(aEvent.keyCode==8&&(queryVal==null||queryVal=='')){jQuery("#outlineButton").removeAttr("disabled");jQuery("#outlineButton").attr("disabled",true);jQuery("#outlineButton").removeClass("outlineEnabled");jQuery("#outlineButton").addClass("outlineDisabled");jQuery("#clearLink").css('display','none');jQuery("#clearLinkDiv").css('display','none');}
switch(aEvent.keyCode){case 40:moveDelta(1);return false;break;case 38:moveDelta(-1);return false;case 13:flagForEnter=true;this.insertCode();return false;}}};this.explainTerm=function(aTerm){aDiv=jQuery("#codesuggestor_exp");var theHTML="";if(explanations[aTerm]!=null){theHTML='<b>'+advance.JS_ALERT_ADV_SRCH_EX_CODE()+'</b>'+aTerm+'<br/>';theHTML+='<b>'+advance.JS_ALERT_ADV_SRCH_EX_NAME()+'</b>'+explanations[aTerm][0]+'<br/><br/>';theHTML+=explanations[aTerm][1];if(explanations[aTerm][2]!=null){theHTML+="<br/><div id='moreLink' class='moreLink'>"+"<a class='moreInfo' title='"+advance.JS_ALERT_ADV_SRCH_MOREINFO()+"' onclick='aSuggestion.showHideMoreInfo();'>"+advance.JS_ALERT_ADV_SRCH_MOREINFO()+"</a></div><div id='extraInfo' class='extraInfo'>"+explanations[aTerm][2]+"</div>";}else{aDiv.css('height',"140px");}
aDiv.html(theHTML);}else{theHTML='<b>'+advance.JS_ALERT_ADV_SRCH_EX_CODE()+'</b>'+aTerm+'<br/>';aDiv.html(theHTML);}};function doBlur(){aSearchfield=document.getElementById('searchfield');aSearchfield.focus();}
function moveDelta(aDirection){aForm=document.AdvancedValidatedSearchForm;aSuggestBox=aForm.elements['suggestion-box'];aSearchfield=document.getElementById('searchfield');aSearchfield.focus();theOptions=aSuggestBox.getElementsByTagName('option');newIndex=aSuggestBox.selectedIndex+aDirection;if(newIndex>-1&&newIndex<theOptions.length){aSuggestBox.selectedIndex=aSuggestBox.selectedIndex+aDirection;realThis.explainTerm(aSuggestBox.value);}
return false;}
this.insertCode=function(){aForm=document.AdvancedValidatedSearchForm;aSuggestBox=aForm.elements['suggestion-box'];if(aSuggestBox.selectedIndex==-1){return}
aSearchfield=document.getElementById('searchfield');var searchObj=jQuery(aSearchfield);var searchTxt=searchObj.text();aSearchfield.focus();if(jQuery("#outlineButton").attr("disabled")){jQuery("#outlineButton").removeAttr("disabled");jQuery("#outlineButton").attr("disabled",false);jQuery("#outlineButton").removeClass("outlineDisabled");jQuery("#outlineButton").addClass("outlineEnabled");jQuery("#clearLink").css('display','inline');jQuery("#clearLinkDiv").css({'display':'inline','color':'#B7B7B7'});}
aSearchfield=getSelectionPositions(aSearchfield);aOption=aSuggestBox[aSuggestBox.selectedIndex];var optionLength=aOption.value;var startPos=aSearchfield.selectionStart;var endPos=aSearchfield.selectionEnd;var revSelectCheck=searchTxt.substring(startPos-flagValue,startPos);if(revSelectCheck.length==flagValue)
{startPos=aSearchfield.selectionStart-flagValue;endPos=aSearchfield.selectionStart;flagValue=-2;}
if(flagForEnter==true)
{startPos=startPos-lookupValue;flagForEnter=false;}
aNewvalue=searchTxt.substring(0,startPos);var endValue=endPos;aNewvalue=aNewvalue.substring(0,startPos);aOption=aSuggestBox[aSuggestBox.selectedIndex];aNewvalue+=optionGetValue(aOption);var newPos=aNewvalue.length-1;aNewvalue+=searchTxt.substring(endValue,searchTxt.length);aSearchfield.innerHTML=aNewvalue;aSearchfield.focus();if(aSearchfield.innerHTML!=''){jQuery('.searchForTxtDiv').css({'display':'none'});}
else if(aSearchfield.innerHTML==''){jQuery('.searchForTxtDiv').css({'display':'block'});}
if(subCursor==0)
{globalCusrsorValue=globalCusrsorValue+optionLength.length+1;subCursor=0;}
setSelectionPositions(aSearchfield,aOption,newPos);};function doSuggest(aSearchfield){aForm=document.AdvancedValidatedSearchForm;aSuggestBox=aForm.elements['suggestion-box'];aLookupValue=getLookupValue(aSearchfield).toUpperCase();lookupValue=aLookupValue.length;if(aLookupValue!=''){if(aSuggestBox.selectedIndex>-1){aSuggestBox[aSuggestBox.selectedIndex].selected=false;aSuggestBox.value=null;}
for(var i=0;i<aSuggestBox.length;i++){if(aSuggestBox[i].value.indexOf(aLookupValue)==0){aSuggestBox.value=aSuggestBox[i].value;realThis.explainTerm(aSuggestBox[i].value);break;}}}else{if(aSuggestBox.selectedIndex>-1){aSuggestBox[aSuggestBox.selectedIndex].selected=false;}}}
function getLookupValue(aSearchfield){var searchObj=jQuery(aSearchfield);aValue=searchObj.text();var textValue=searchObj.text();getSelectionPositions(aSearchfield);var startPos=aSearchfield.selectionStart;aLookupValue=jQuery.trim(textValue);lvStarts=new Array(aLookupValue.lastIndexOf(' ',startPos-1),aLookupValue.lastIndexOf('(',startPos-1),aLookupValue.lastIndexOf(')',startPos-1));lvStarts.sort(sortNumbers);lvStart=lvStarts[lvStarts.length-1]+1;lvEnds=new Array();lvEnds[lvEnds.length]=(aLookupValue.indexOf(' ',startPos-1)==-1)?textValue.length:aLookupValue.indexOf(' ',startPos-1);lvEnds[lvEnds.length]=(aLookupValue.indexOf('(',startPos-1)==-1)?textValue.length:aLookupValue.indexOf('(',startPos-1);lvEnds[lvEnds.length]=(aLookupValue.indexOf(')',startPos-1)==-1)?textValue.length:aLookupValue.indexOf(')',startPos-1);lvEnds.sort(sortNumbers);lvEnd=lvEnds[0];if(lvEnd==-1){lvEnd=textValue.length;}
aLookupValue=aLookupValue.substring(lvStart,lvEnd);return aLookupValue.replace(/[\s]+/,'');}
function inbetweenBrackets(startPos){posStartBracket=aValue.lastIndexOf('(',startPos-1);posClosingBracket=aValue.indexOf(')',posStartBracket-1);if(posStartBracket==-1){return false;}else if(posStartBracket<startPos&&posClosingBracket>=startPos){return true;}else if(posStartBracket<startPos&&posClosingBracket==-1){return true;}else{return false;}}
function prepareValue(aVal){aValue=aVal.toUpperCase();aValue=aValue.replace(/\n+|\s+/gi,' ');return aValue;}
function sortNumbers(a,b){return a-b;}
function getSelectionPositions(aSearchfield){if(document.selection){sel=document.selection.createRange();var stored_range=sel.duplicate();stored_range.moveToElementText(aSearchfield);stored_range.setEndPoint('EndToEnd',sel);aSearchfield.selectionStart=stored_range.text.length-sel.text.length;aSearchfield.selectionEnd=aSearchfield.selectionStart+sel.text.length;aSearchfield.stringLength=sel.text.length;return aSearchfield;}
else if(window.chrome){var selObj=window.getSelection();cursorPos=selObj.anchorOffset;var selectedString=String(selObj).length;subCursor=cursorPos;var flagSet=false
if(cursorPos!=0||selectedString>0){globalCusrsorValue=cursorPos;selectStartValue=globalCusrsorValue;selectEndValue=selectStartValue+String(selObj).length;if(selectStartValue!=selectEndValue){finalStartPos=selectStartValue;finalEndPos=selectEndValue;flagValue=String(selObj).length;if(cursorPos==0)
{flagSet=true;}}}
else{selectStartValue=globalCusrsorValue;selectEndValue=selectStartValue+String(selObj).length;}
if(finalEndPos>=0){if(cursorPos==0&&flagSet!=true){aSearchfield.selectionStart=finalStartPos;aSearchfield.selectionEnd=finalEndPos;flagSet=false;finalStartPos=-2;finalEndPos=-2;return aSearchfield;}}
else{aSearchfield.selectionStart=selectStartValue;aSearchfield.selectionEnd=selectEndValue;return aSearchfield;}}
else{var selObj1=window.getSelection();cursorPos=selObj1.anchorOffset;aSearchfield.selectionStart=cursorPos-String(selObj1).length;aSearchfield.selectionEnd=aSearchfield.selectionStart+String(selObj1).length;if(aSearchfield.selectionStart<0){var temp=aSearchfield.selectionStart;aSearchfield.selectionStart=aSearchfield.selectionEnd;aSearchfield.selectionEnd=Math.abs(temp)+aSearchfield.selectionEnd+1;}
return aSearchfield;}}
function findNode(list,node){for(var i=0;i<list.length;i++){if(list[i]==node){return i;}}
return-1;}
function setSelectionPositions(aSearchfield,aOption,newPos){if(document.selection){aSearchfield.focus();sel=document.selection.createRange();var stored_range=sel.duplicate();stored_range.moveToElementText(aSearchfield);stored_range.setEndPoint('EndToEnd',sel);sel.move("character",-stored_range.text.length);sel.move("character",newPos+1);if(aOption.getAttribute("e:brackets")!="false"){sel.move("character",-1);}
sel.select();}else if(document.getSelection){var sel=window.getSelection();var srchObj=document.getElementById('searchfield');srchObj.innerHTML=jQuery.trim(srchObj.innerHTML)+'&nbsp;';sel.collapse(srchObj.firstChild,newPos+1);if(aOption.getAttribute("e:brackets")!="false"){sel.collapse(srchObj.firstChild,newPos);}}
aSearchfield.focus();}
function optionGetValue(aOption){if(aOption.getAttribute("e:brackets")=="false"){return aOption.value+' ';}else{return aOption.value+'()';}}
this.showHideMoreInfo=function(){jQuery('#moreLink').css('display','none');jQuery('#extraInfo').css('display','block');jQuery('#codesuggestor_exp').css('height','auto');this.setSuggestBoxHeight();};this.setSuggestBoxHeight=function(){var height=jQuery(".operatorsDescription").height();jQuery("#suggestion-box").css("height",height);}}
CodeSuggestor.prototype.explainTerm=function(aTerm){explainTerm(aTerm);};var aSuggestion=new CodeSuggestor();function AdvancedQueryAction(){this.saveAdvSearchHandleStates=function(handleName,currObj){var thisObj=jQuery(currObj);var handlerObj=jQuery("#handlerStatus");var searchObj=jQuery("#searchfield");var handlerStatus=handlerObj.val();var viewportWidth=jQuery("#sciverseCanvasArea").width()-12;var searchOuterWidth=viewportWidth-19;var searchWidth=viewportWidth-46;var handlerArray=handlerStatus.split(":");switch(handleName){case"left":thisObj.css('background-position',"0 -120px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('right',ev.currentTarget);});var cornerObj=jQuery("#cornerHandle");jQuery("#advancedSearchBox").css('width',viewportWidth);jQuery("#textAreabg").css('width',searchOuterWidth);jQuery("#textWrapper").css('width',searchOuterWidth);searchObj.css('width',searchWidth);jQuery('#verticalHandle').css('left','415px');jQuery('#verticalHandle').css('margin-bottom',"0px");if(handlerArray[1]=="down"){cornerObj.css('background-position',"0 0");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerdown',ev.currentTarget);});handlerObj.val("right:down:cornerdown");}else{cornerObj.css('background-position',"0 -80px");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("right:up:cornerup");}
break;case"right":thisObj.css('background-position',"0 -160px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('left',ev.currentTarget);});var cornerObj=jQuery("#cornerHandle");jQuery("#advancedSearchBox").css('width',"767px");jQuery("#advancedSearchBox .contentMain .contentBorders").css('margin-right',"0");jQuery("#textAreabg").css('width',"728px");jQuery("#textWrapper").css('width',"744px");searchObj.css('width',"720px");jQuery('#verticalHandle').css('left','415px');jQuery('#verticalHandle').css('margin-bottom',"0px");if(handlerArray[1]=="down"){cornerObj.css('background-position',"0 -80px");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("left:down:cornerup");}else{cornerObj.css('background-position',"0 -80px");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("left:up:cornerup");}
break;case"up":thisObj.css('background-position',"0 -200px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_HEIGHT_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('down',ev.currentTarget);});searchObj.css('height',"700px");jQuery('#horizontalHandle').css('top','320px');var cornerObj=jQuery("#cornerHandle");if(handlerArray[0]=="right"){cornerObj.css('background-position',"0 0");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerdown',ev.currentTarget);});handlerObj.val("right:down:cornerdown");}else{cornerObj.css('background-position',"0 -80px");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("left:down:cornerup");}
break;case"down":searchObj.css('height',"200px");jQuery('#horizontalHandle').css('top','97px');thisObj.css('background-position',"0 -40px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_HEIGHT_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('up',ev.currentTarget);});var cornerObj=jQuery("#cornerHandle");if(handlerArray[0]=="right"){cornerObj.css('background-position',"0 -80");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("right:up:cornerup");}else{cornerObj.css('background-position',"0 -80px");cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("left:up:cornerup");}
break;case"cornerup":var horizontalObj=jQuery("#horizontalHandle");var verticalObj=jQuery("#verticalHandle");verticalObj.css('background-position',"0 -200px");verticalObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_HEIGHT_TOOLTIP());verticalObj.unbind("click");verticalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('down',ev.currentTarget);});horizontalObj.css('background-position',"0 -120px");horizontalObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_TOOLTIP());horizontalObj.unbind("click");horizontalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('right',ev.currentTarget);});thisObj.css('background-position',"0 -2px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_HEIGHT_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerdown',ev.currentTarget);});handlerObj.val("right:down:cornerdown");jQuery("#advancedSearchBox").css('width',viewportWidth);jQuery("#textAreabg").css('width',searchOuterWidth);jQuery("#textWrapper").css('width',searchOuterWidth);searchObj.css({'width':searchWidth,'height':"700px"});horizontalObj.css('top','320px');verticalObj.css('left','415px');break;case"cornerdown":var horizontalObj=jQuery("#horizontalHandle");var verticalObj=jQuery("#verticalHandle");verticalObj.css('background-position',"0 -40px");verticalObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_HEIGHT_TOOLTIP());verticalObj.unbind("click");verticalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('up',ev.currentTarget);});horizontalObj.css('background-position',"0 -160px");horizontalObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_TOOLTIP());horizontalObj.unbind("click");horizontalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('left',ev.currentTarget);});thisObj.css('background-position',"0 -80px");thisObj.attr('title',advance.JS_ALERT_ADV_SRCH_INC_WIDTH_HEIGHT_TOOLTIP());thisObj.unbind("click");thisObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});handlerObj.val("left:up:cornerup");searchObj.css('height',"200px");jQuery("#advancedSearchBox").css('width',"766px");jQuery("#advancedSearchBox .contentMain .contentBorders").css('margin-right',"0px");jQuery("#textAreabg").css('width',"728px");jQuery("#textWrapper").css('width',"744px");searchObj.css('width',"720px");horizontalObj.css('top','97px');verticalObj.css('left','415px');break;}
var saveHandleUrl='/search/advanced/saveFormState.url';var queryString="?handleValue="+escape(handlerObj.val());saveHandleUrl=saveHandleUrl+queryString;jQuery.ajax({url:saveHandleUrl,type:"get"});};this.advanceSearchQuery=function(activity,event){event.preventDefault();var searchString=jQuery("#searchfield").text();searchString=searchString.replace(/\s{2,}/g,' ');searchString=jQuery.trim(searchString);searchString=searchString.replace(/(\r\n|\n|\r)/gm,' ');var swapCodes=new Array(8211,8212,8216,8217,8220,8221,8226,8230);var swapStrings=new Array("--","--","'","'","\"","\"","*","...");var output=searchString;for(var i=0;i<swapCodes.length;i++){var swapper=new RegExp("\\u"+swapCodes[i].toString(16),"g");output=output.replace(swapper,swapStrings[i]);}
searchString=output;if(searchString==null||searchString==''){alert(advance.JS_ALERT_ADV_SRCH_NO_OUTLINE());jQuery("#searchfield").focus();}else{var searchQueryUrl='/search/advanced/outlineQuery.url';jQuery("#advLoad").css('display','block');jQuery("#searchfield").css('color','#CCC');jQuery("#outlineButton").css('disabled',true);jQuery("#outlineButton").removeClass('outlineEnabled');jQuery("#outlineButton").addClass('outlineDisabled');var queryString="?activity="+activity+"&query="+encodeURIComponent(searchString);queryString=queryString.replace(new RegExp("%C2%A0","g"),"");searchQueryUrl=searchQueryUrl+queryString;jQuery.ajax({url:searchQueryUrl,dataType:"html",async:true,success:function(data){jQuery("#advLoad").css('display','none');jQuery("#searchfield").css('color','#000');jQuery("#outlineButton").css('disabled',false);jQuery("#outlineButton").removeClass('outlineDisabled');jQuery("#outlineButton").addClass('outlineEnabled');var retQuery=jQuery(data).filter('.textAreaContents').html();var retErrorMsg=jQuery(data).filter('.errorMsgContents').html();if(activity=='compact'){jQuery("#searchDivider").hide();jQuery("#compactQueryLink").hide();jQuery("#erroMsg").html('');jQuery("#searchfield").html(retQuery);}else{var retSearchQuery="";var brTag="<br>";var retQueryArray=retQuery.split(/<br>/i);var highlightSpanTextStart="<span class=\"errorHighlightColor\">";var spanTextEnd="</span>";var spanTextStart="<span>";var errorSpanText="errorHighlightColor";var fieldGroupSpanText="<span class=\"advSearchFieldIndent\">";for(i=0;i<retQueryArray.length;i++){var fieldGroupFlag=true;var currStr=retQueryArray[i].toLowerCase();var highlightSpanStart=currStr.indexOf(errorSpanText.toLowerCase());var highlightSpanEnd=currStr.indexOf(spanTextEnd.toLowerCase());if(highlightSpanStart>-1){currStr.replace(new RegExp('<span.*?>','i'),"");}
if(highlightSpanEnd>-1){currStr.replace(spanTextEnd,"");}
for(var j=0;j<codeList.length;j++){if((currStr.toUpperCase()).indexOf(codeList[j]+"(")>-1){if(highlightSpanStart>-1&&highlightSpanEnd==-1){retQueryArray[i]=fieldGroupSpanText+retQueryArray[i]+spanTextEnd+spanTextEnd+highlightSpanTextStart;}else if(highlightSpanStart==-1&&highlightSpanEnd>-1){var indxEndSpan=(retQueryArray[i].search(/<\/span>/i))+spanTextEnd.length;var strBeforeSpan=retQueryArray[i].substring(0,indxEndSpan);var strAfterSpan=retQueryArray[i].substring(indxEndSpan,retQueryArray[i].length);if((strBeforeSpan.toUpperCase()).indexOf(codeList[j]+"(")>-1){retQueryArray[i]=fieldGroupSpanText+strBeforeSpan
+spanTextEnd+spanTextStart
+strAfterSpan+spanTextEnd;}else if((strAfterSpan.toUpperCase()).indexOf(codeList[j]+"(")>-1){retQueryArray[i]=spanTextStart+strBeforeSpan
+spanTextEnd+fieldGroupSpanText
+strAfterSpan+spanTextEnd;}else{retQueryArray[i]=spanTextStart+strBeforeSpan
+spanTextEnd+spanTextStart
+strAfterSpan+spanTextEnd;}}else{retQueryArray[i]=fieldGroupSpanText+retQueryArray[i]+spanTextEnd;}
fieldGroupFlag=false;break;}}
retSearchQuery=retSearchQuery+retQueryArray[i];if((fieldGroupFlag==true)&&(i<(retQueryArray.length)-1)){retSearchQuery=retSearchQuery+brTag;}}
if(retSearchQuery.indexOf(brTag+fieldGroupSpanText)>-1){retSearchQuery=retSearchQuery.replace(/<br><span class="advSearchFieldIndent">/g,fieldGroupSpanText);}
jQuery("#searchDivider").show();jQuery("#compactQueryLink").show();if(retErrorMsg!=''){jQuery("#erroMsg").html(retErrorMsg);}
jQuery("#searchfield").html(retSearchQuery);var divHeight=jQuery("#searchfield").height();if(jQuery(".errorHighlightColor").offset()!=null){var errHeight=jQuery(".errorHighlightColor").offset().top-(jQuery("#searchfield").offset().top);if(errHeight>divHeight){jQuery("#searchfield").attr("scrollTop",errHeight);}}}
jQuery("#searchfield").focus();},error:function(){jQuery("#searchfield").html("");}});}};this.clearAdvanceSearchQuery=function(event){var agent=navigator.userAgent;var index=agent.indexOf("MSIE");jQuery("#searchfield").html('').trigger("showSearchPlachold");jQuery("#clearLink").hide();jQuery("#clearLinkDiv").hide();jQuery("#outlineButton").removeAttr("disabled");jQuery("#outlineButton").attr("disabled",true);jQuery("#outlineButton").removeClass("outlineEnabled");jQuery("#outlineButton").addClass("outlineDisabled");jQuery("#searchDivider").hide();jQuery("#compactQueryLink").hide();if(jQuery("#erroMsg")){jQuery("#erroMsg").html('');}
jQuery("#searchfield").focus();event.preventDefault();};this.displayAdvSearchHandleStates=function(handleStates){if(handleStates!=null){handleStates=handleStates.replace(/^\s\s*/,'').replace(/\s\s*$/,'');var stateArray=handleStates.split(":");var viewportWidth=jQuery("#sciverseCanvasArea").width()-12;var searchOuterWidth=viewportWidth-19;var searchWidth=viewportWidth-46;var handlerObj=jQuery("#handlerStatus");if(stateArray[2]!=''&&stateArray[2]=='cornerup'){if(stateArray[0]=='left'&&stateArray[1]=='up'){handlerObj.val("left:up:cornerup");}else if(stateArray[0]=='right'){var rightHandleObj=jQuery("#horizontalHandle");rightHandleObj.css('background-position','0 -120px');rightHandleObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_TOOLTIP());rightHandleObj.unbind("click");rightHandleObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('right',ev.currentTarget);});jQuery("#advancedSearchBox").css('width',viewportWidth);jQuery("#textAreabg").css('width',searchOuterWidth);jQuery("#textWrapper").css('width',searchOuterWidth);jQuery("#searchfield").css('width',searchWidth);jQuery('#verticalHandle').css('left','415px');handlerObj.val("right:up:cornerup");}else if(stateArray[1]=='down'){var verticalObj=jQuery("#verticalHandle");verticalObj.css('background-position','0 -200px');verticalObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_HEIGHT_TOOLTIP());verticalObj.unbind("click");verticalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('down',ev.currentTarget);});jQuery("#searchfield").css('height','700px');jQuery("#horizontalHandle").css('top','320px');handlerObj.val("left:down:cornerup");}}else if(stateArray[2]!=''&&stateArray[2]=='cornerdown'){var horizontalObj=jQuery("#horizontalHandle");var verticalObj=jQuery("#verticalHandle");verticalObj.css('background-position','0 -200px');verticalObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_HEIGHT_TOOLTIP());verticalObj.unbind("click");verticalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('down',ev.currentTarget);});horizontalObj.css('background-position','0 -120px');horizontalObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_TOOLTIP());horizontalObj.unbind("click");horizontalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('right',ev.currentTarget);});var cornerObj=jQuery("#cornerHandle");cornerObj.css('background-position','0 0');cornerObj.attr('title',advance.JS_ALERT_ADV_SRCH_DEC_WIDTH_HEIGHT_TOOLTIP());cornerObj.unbind("click");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerdown',ev.currentTarget);});handlerObj.val("right:down:cornerdown");jQuery("#advancedSearchBox").css('width',viewportWidth);jQuery("#textAreabg").css('width',searchOuterWidth);jQuery("#textWrapper").css('width',searchOuterWidth);jQuery("#searchfield").css({'width':searchWidth,'height':"700px"});horizontalObj.css('top','320px');verticalObj.css('left','415px');}}};}
var queryAction=new AdvancedQueryAction();jQuery(document).ready(function(){var agent=navigator.userAgent;var index=agent.indexOf("MSIE");jQuery("#searchfield").focus();var outlineObj=jQuery("#outlineButton");outlineObj.bind("click",function(ev){queryAction.advanceSearchQuery('outline',ev);});var compactObj=jQuery("#compactQueryLink");compactObj.bind("click",function(ev){queryAction.advanceSearchQuery('compact',ev);});var clearFormObj=jQuery("#clearLink");clearFormObj.bind("click",function(ev){queryAction.clearAdvanceSearchQuery(ev);});var horizontalObj=jQuery("#horizontalHandle");horizontalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('left',ev.currentTarget);});var verticalObj=jQuery("#verticalHandle");verticalObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('up',ev.currentTarget);});var cornerObj=jQuery("#cornerHandle");cornerObj.bind("click",function(ev){queryAction.saveAdvSearchHandleStates('cornerup',ev.currentTarget);});var searchObj=jQuery("#searchfield");searchObj.bind("click",function(ev){aSuggestion.make(ev,ev.currentTarget);});searchObj.bind("keyup",function(ev){aSuggestion.make(ev,ev.currentTarget);checkBRTag();});searchObj.bind("keydown",function(ev){return aSuggestion.eventHandler(ev,ev.currentTarget);});searchObj.bind("paste",null,function(ev){if(!ev.keyCode){jQuery("#outlineButton").removeAttr("disabled");jQuery("#outlineButton").attr("disabled",false);jQuery("#outlineButton").removeClass("outlineDisabled");jQuery("#outlineButton").addClass("outlineEnabled");jQuery("#clearLink").css('display','inline');jQuery("#clearLinkDiv").css({'display':'inline','color':'#B7B7B7'});}});var suggestionBoxObj=jQuery("#suggestion-box");suggestionBoxObj.bind("keydown",function(ev){return aSuggestion.eventHandler(ev,ev.currentTarget);});if(handleStates!=null&&handleStates!=''){queryAction.displayAdvSearchHandleStates(handleStates);}
if(advSearchFieldVal!=null&&advSearchFieldVal!=''){jQuery("#searchfield").html(advSearchFieldVal);var divHeight=jQuery("#searchfield").height();if(jQuery(".errorHighlightColor").offset()!=null){var errHeight=jQuery(".errorHighlightColor").offset().top-(jQuery("#searchfield").offset().top);if(errHeight>divHeight){jQuery("#searchfield").attr("scrollTop",errHeight);}}}
jQuery('#searchfield').searchForPlaceholder({left:{enabled:true,value:srchFor,type:"simple",classes:"searchForTxtDiv"},right:{enabled:false}});jQuery("#clearLink").click(function(){globalCusrsorValue=0;});});function checkBRTag(){var searchText=jQuery.trim(jQuery('#searchfield').html());if(searchText=='<br>'){jQuery('#searchfield').html('');}}
function selectAllItems(form){var currentCount=0;var check=form.selectAll.checked;for(var i=0;i<form.elements.length;i++){if(form.elements[i].name!="selectAll"){if(check&&form.elements[i].name!="selectAll"&&form.elements[i].type=="checkbox"){form.elements[i].checked=true;currentCount++;}else{form.elements[i].checked=false;}}}
form.deletecount.value=currentCount.toString();return true;}
function updateCheckedCount(form,checkbox){var currentCount=parseInt(form.deletecount.value);if(checkbox.checked){currentCount++;var totalCount=parseInt(form.totalcount.value);if(totalCount==currentCount){form.selectAll.checked=true;}}else{currentCount--;if(form.selectAll.checked){form.selectAll.checked=false;}}
form.deletecount.value=currentCount.toString();}
function setDeleteBtnText(btn){btn.alt="Delete the "+btn.form.deletecount.value+" selected searches";btn.title="Delete the "+btn.form.deletecount.value+" selected searches";}
function validateHistoryDelete(form){var checkedCount=0;for(var i=0;i<form.elements.length;i++){if(form.elements[i].checked&&form.elements[i].name!="selectAll"){checkedCount++;}}
if(checkedCount==0){alert(basic.savelist.message2()+"\r\n"+basic.savelist.message3());return false;}
if(checkedCount==1){if(!confirm(basic.search.history.error.deletethis())){return false;}}else{if(!confirm(basic.search.history.error.deletes())){return false;}}
form.submit();return false;}
function confirmHistoryDelete(){if(!confirm(basic.search.history.error.deletethis())){return false;}}
function clearCombineQueryText(field){if(field.defaultValue==field.value)
field.value='';else if(field.value==''){field.style.color='#9b9b9b';field.value=field.defaultValue;}}
var netscape=(navigator.appName=="Netscape");function checkKeyStroke(DnEvents){var key=(netscape)?DnEvents.which:window.event.keyCode;if(key==13){with(document.SearchResultsForm){if(news.value!=''){searchWithinResultsDefault.value="t";submit();}}}}
function checkEnterSW(){var key=(netscape)?DnEvents.which:window.event.keyCode;if(key==13){return checkSWBox();}else{return true;}}
function checkSWBox(){if(document.SearchResultsForm.news.value==''){alert(basic.search.error.search.required()+' \r\n'+basic.search.error.search.required.enter());return false;}else{return true;}}
function toggleHistoryRowLnk(rowid){var hoverLinks=jQuery("#historyHoverLinks"+rowid);if(!jQuery.isEmptyObject(hoverLinks)){if(hoverLinks.hasClass('hoverLinks')){hoverLinks.removeClass('hoverLinks');hoverLinks.addClass("visibleLink");}
else{hoverLinks.removeClass('visibleLink');hoverLinks.addClass("hoverLinks");}}}
var SearchHistory={};function storedSearchInit(){BSGlobalVar.searchHist.hasdata=jQuery.isEmptyObject(BSGlobalVar.searchHist.historyItems);jQuery("#showAllSearchHistory").bind("click",SearchHistory.showAllSearchHistory);jQuery("#showMostSearchHistory").bind("click",SearchHistory.showMostSearchHistory);jQuery("#searchHistHeader .btnSearch").attr('disabled','disabled');jQuery('.combineQueries').on('keyup','#combinedSearch',function(event){if(event.keyCode!=9||event.keyCode!=18||event.keyCode!=13){var buttonObj=jQuery("#searchHistHeader .btnSearch");if(event.type==='keyup'&&!buttonObj.hasClass("btnSearchActive")&&jQuery("#combinedSearch").val()!=""){buttonObj.addClass("btnSearchActive").removeAttr('disabled');}
else if((jQuery("#combinedSearch").val()=="")&&event.type==='keyup'){buttonObj.removeClass("btnSearchActive").attr('disabled','disabled');}}});}
SearchHistory.showAllSearchHistory=function(event){jQuery("#mostRecentMsg").hide();jQuery("#allRecentMsg").show();var historyItems=BSGlobalVar.searchHist.historyItems;var historyCount=BSGlobalVar.searchHistCount;var totalHist=BSGlobalVar.historyDefDispCount;if(historyCount>totalHist){var counter=historyCount-totalHist;for(var i=0;i<counter;i++){var historyItem=historyItems[totalHist+i];var listItem=jQuery("<li>");jQuery("#searchHistUL").append(listItem);var row=jQuery("<div>");listItem.append(row);var col1=jQuery("<div>").addClass("searchHistoryFirstCol").html(historyItem.id);var secondColCont=SearchHistory.getSeconColData(historyItem.searchText);var thirdColData=SearchHistory.getThirdColData(historyItem.results,historyItem.id);var col2=jQuery("<div>").addClass("searchHistorySecondCol").html(secondColCont);var col3=jQuery("<div>").addClass("searchHistoryThirdCol").append(thirdColData[0]).append(thirdColData[1]);row.addClass("searchHistoryDataRow").append(col1).append(col2).append(col3);var rowContent=[];row.append('<div class="clear"></div>');}}};SearchHistory.showMostSearchHistory=function(event){jQuery("#mostRecentMsg").show();jQuery("#allRecentMsg").hide();var historyItems=BSGlobalVar.searchHist.historyItems;var historyCount=BSGlobalVar.searchHistCount;var totalHist=BSGlobalVar.historyDefDispCount;if(historyCount>totalHist){var counter=historyCount-totalHist;var lis=jQuery("#searchHistUL").children();for(var i=historyCount;i>totalHist;i--){jQuery(lis[i-1]).remove();}}};SearchHistory.getSeconColData=function(searchText){var colContent=[];searchText=searchText.replace(/\((.*?)\)/g,'(</span><span class="txtSmallerBold">$1</span><span class="txtSmaller">)');colContent.push('<span class="txtSmaller">',searchText,'</span>');return colContent.join('');};SearchHistory.getThirdColData=function(docCount,id){var content=[];var resultsCountDiv=jQuery("<div>").addClass("resultsCount");var link=['<a href="',BSGlobalVar.historyCntURL,'&shid=',id,'" >',SearchHistory.formatNo(docCount),'</a>'];var text=BSGlobalVar.searchHistCountText;text=text.replace("~",link.join(''));resultsCountDiv.html(text);var hoverLinksDiv=jQuery("<div>").addClass("hoverLinks");var hoverCont=SearchHistory.getHoverLinks(id);hoverLinksDiv.html(hoverCont);return[resultsCountDiv,hoverLinksDiv];};SearchHistory.formatNo=function(nStr){nStr+='';x=nStr.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;};SearchHistory.getHoverLinks=function(id){var hoverContent=['<span><a title="',BSGlobalVar.feedTitle,'" class="icon setFeed" target="_blank" href="/results/rss/handler.url?searchHistoryId=',id,'">&nbsp;</a>','</span>'];hoverContent.push('<span><a title="',BSGlobalVar.alertTitle,'" class="icon saveAsAlert" target="_blank" href="/search/history/alert.url?shid=',id,'">&nbsp;</a>','</span>');hoverContent.push('<span><a title="',BSGlobalVar.saveTitle,'" class="icon save" href="/search/history/save.url?shid=',id,'">&nbsp;</a>','</span>');hoverContent.push('<span><a title="',BSGlobalVar.editTitle,'" class="icon edit" href="/search/history/edit.url?shid=',id,'">&nbsp;</a>','</span>');hoverContent.push('<span><a title="',BSGlobalVar.deleteTitle,'" class="icon deletes" href="/search/history/delete.url?shid=',id,'" onclick="return confirmHistoryDelete()">&nbsp;</a>','</span>');return hoverContent.join('');};var cmbQuer=jQuery(window['basic']).length?basic.HIST_COMBINE_4():(jQuery(window['messages']).length?messages.HIST_COMBINE_4():'');var cmbEgTxt=jQuery(window['basic']).length?basic.HIST_ENTER_EXAMPLE_TEXT():(jQuery(window['messages']).length?messages.HIST_ENTER_EXAMPLE_TEXT():'');jQuery(document).ready(function(){if(jQuery('.chkCombinedSearch').length>0){jQuery('#combinedSearch').searchForPlaceholder({left:{enabled:true,value:cmbQuer,type:"simple",classes:"searchForTxt"},right:{enabled:true,value:cmbEgTxt,type:"simple",classes:"waterMarkOnitalic"}});}});var searchHistoryHover={HoverTimer:150,init:function(){jQuery('#showDetails ul.searchHistoryData li').live('mouseenter',function(){jQuery(this).attr('data-hover','true');var obj=this;window.setTimeout(function(){searchHistoryHover.onmouseoverLI(obj);},searchHistoryHover.HoverTimer);});jQuery('#showDetails ul.searchHistoryData li').live('mouseleave',function(){jQuery(this).attr('data-hover','false');jQuery(this).removeClass('listItemHover');});jQuery('#showDetails ul.searchHistoryData li a').live('focus',searchHistoryHover.addEffect);},onmouseoverLI:function(obj){if(jQuery(obj).attr('data-hover')=='true'&&!jQuery(obj).hasClass('listItemHover')){jQuery(obj).addClass('listItemHover');}},addEffect:function(event){var element=jQuery(event.target);if(!element.is("li")){element=jQuery(element).closest("li");}
jQuery(element).attr('data-hover','true');window.setTimeout(function(){searchHistoryHover.onmouseoverLI(element);},searchHistoryHover.HoverTimer);var previousLI=jQuery(element).prev("li.listItemHover");searchHistoryHover.removeEffect(previousLI);var previousLI=jQuery(element).next("li.listItemHover");searchHistoryHover.removeEffect(previousLI);},removeEffect:function(element){jQuery(element).attr('data-hover','false');jQuery(element).removeClass('listItemHover');}};function openSeperateWindow(pageToLoad,winName,width,height,center)
{if(winName=='popuptip'){loc=2;}else{loc=0;}
args=getArgs(width,height,center,0,loc);if((parseInt(navigator.appVersion)>=4)&&(center)){if(window.sepwindow){sepwindow.close();sepwindow=window.open(pageToLoad,winName,args);}}
sepwindow=window.open(pageToLoad,winName,args);return false;}
function openGlobalhelp(pageToLoad,winName,width,height,center){if(winName=='popuptip'){loc=2;}else{loc=0;}
args=getArgs(width,height,center,0,loc);if((parseInt(navigator.appVersion)>=4)&&(center)){if(window.globalhelp){globalhelp.close();globalhelp=window.open(pageToLoad,winName,args);}}
globalhelp=window.open(pageToLoad,winName,args);return false;}
function getArgs(width,height,center,menu,loc){xposition=10;yposition=10;if((parseInt(navigator.appVersion)>=4)&&(center)){if(loc==0){xposition=(screen.width-width)-10;yposition=(screen.height-height)-58;}else if(loc==1){xposition=(screen.width-width)/2;yposition=((screen.height-height)/2)-67;}else if(loc==2){xposition=(screen.width-width)-10;yposition=0;}}
if(navigator.appName=='Netscape'){width=width+25;height=height+25;}
args="width="+width+",height="+height+",toolbar="+menu+",menubar="+menu
+",screenx="+xposition+",screeny="+yposition+",left="+xposition+",top="+
yposition+",resizable=1,scrollbars=1,";return args;}
function openSizedWindow(url,winname){if((navigator.appName=="Microsoft Internet Explorer")&&(parseFloat(navigator.appVersion)<4))
{return false;}
var parms='width=750'+',height=450'+',screenX=0'+',screenY=0'+',left=0'+',top=0'+',status=yes,toolbar=yes,menubar=yes,location=yes'+',scrollbars=yes,resizable=yes';win=window.open(url,winname,parms);win.focus();return false;}
function openBareWindow(url,winname){if((navigator.appName=="Microsoft Internet Explorer")&&(parseFloat(navigator.appVersion)<4))
{return false;}
var parms='width=750'+',height=450'+',screenX=0'+',screenY=0'+',left=0'+',top=0'+',status=no,toolbar=no,menubar=no,location=no'+',scrollbars=no,resizable=no';win=window.open(url,winname,parms);win.focus();return false;}
function openPopUpWindow(url,title,width,height,pos,menubar,toolbar,status,resizable,scrollbars,location){var features=createWindowFeatures(width,height,pos,menubar,toolbar,status,resizable,scrollbars,location);return window.open(url,title,features);}
function createWindowFeatures(width,height,pos,menubar,toolbar,status,resizable,scrollbars,location){var xpos=0;var ypos=0;var xfudge=20;var yfudge=40;switch(pos){case 1:xpos=0;ypos=0;break;case 2:xpos=(screen.width-width-xfudge)/2;ypos=0;break;case 3:xpos=screen.width-width-xfudge;ypos=0;break;case 4:xpos=0;ypos=(screen.height-height-yfudge)/2;break;case 5:xpos=(screen.width-width-xfudge)/2;ypos=(screen.height-height-yfudge)/2;break;case 6:xpos=screen.width-width-xfudge;ypos=(screen.height-height-yfudge)/2;break;case 7:xpos=0;ypos=(screen.height-height-yfudge);break;case 8:xpos=(screen.width-width-xfudge)/2;ypos=(screen.height-height-yfudge);break;case 9:xpos=(screen.width-width-xfudge);ypos=(screen.height-height-yfudge-20);break;case 10:xpos=(screen.width-width-10);ypos=0;break;}
args="width="+width+",height="+height+",screenx="+xpos+",left="+xpos+",screeny="+ypos+",top="+ypos+",menubar="+menubar+",toolbar="+toolbar+",location="+location+",status="+status+",resizable="+resizable+",scrollbars="+scrollbars;return args;}
function getJSCheckedUrl(url){url=url+"&javascript=t";return url;}
function clearForm(form){for(var i=0;i<form.elements.length;i++){if(form.elements[i].type!="hidden"){if(form.elements[i].type=="checkbox"){form.elements[i].checked=false;}else{form.elements[i].value="";}}}
return false;}
function flipLogin(button,from){if(from=="loginbox"){var t=jQuery('#loginBox');var u=jQuery('#loginPlus');if(t.css('display')=="none"){t.css('display','block');u.removeClass('plus');u.addClass('minus bg2');}else{t.css('display','none');u.removeClass('minus bg2');u.addClass('plus');}
showLoginBoxPos();}
if(from=="logoutbox"){var t=jQuery('#logoutBox');var u=jQuery('#logoutPlus');if(t.css('display')=="none"){t.css('display','block');u.removeClass('plus');u.addClass('minus bg2');}else{t.css('display','none');u.removeClass('minus bg2');u.addClass('plus');}
showLogoutBoxPos();}}
function showLoginBoxPos(){var divJSLogin=jQuery('#divJSLogin');var divJSLoginWidth=jQuery('#divJSLogin').width();var loginBox=jQuery("#loginBox");var divJSLoginLeftPos=divJSLogin.offset().left;var totalWidthPos=divJSLoginLeftPos+divJSLoginWidth;var windowWidth=jQuery(window).width();loginBox.css('right',windowWidth-totalWidthPos);}
function showLogoutBoxPos(){var logoutPlus=jQuery('a#logoutPlus');var logoutPlusWidth=logoutPlus.width()+20;var logoutBox=jQuery("#logoutBox");var logoutPlusLeftPos=logoutPlus.offset().left;var totalWidthPos=logoutPlusLeftPos+logoutPlusWidth;var windowWidth=jQuery(window).width();logoutBox.css({'right':windowWidth-totalWidthPos,'top':'26px'});}
function submitForm(actionUri){var associationForm=document.getElementById("associationForm");associationForm.action=actionUri;jQuery("#associationForm input[name=http_method_name]").val("GET");associationForm.submit();}
jQuery.fn.selectRange=function(start,end){if(!end)end=start;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}});};function placeHolderInit(){var placeHolderSupport=false;var test=document.createElement('input');if('placeholder'in test)placeHolderSupport=true;if(!placeHolderSupport){jQuery('[placeholder]').unbind('keydown,blur,click').click(function(){jQuery(this).focus();jQuery(this).selectRange(0);}).keydown(function(){var input=jQuery(this);if(input.val()==input.attr('placeholder')){input.val('');input.removeClass('placeholder');}}).blur(function(){var input=jQuery(this);if(input.val()==''||input.val()==input.attr('placeholder')){input.addClass('placeholder');input.val(input.attr('placeholder'));}}).blur().parents('form').submit(function(){jQuery(this).find('[placeholder]').each(function(){var input=jQuery(this);if(input.val()==input.attr('placeholder')){input.val('');}});});}}
function processAlertClick(button){jQuery("#alertClick").val(button);document.SourceInfoFormBean.submit();}
jQuery(document).ready(function(){var txtZoneMsgBar=jQuery('#messageBar');if(txtZoneMsgBar.length){if(jQuery.trim(jQuery('#messageBar div').html())!=''){txtZoneMsgBar.addClass('displayBlock').removeClass('displayNone');}else{txtZoneMsgBar.addClass('displayNone').removeClass('displayBlock');}}
var pipeObj=jQuery("#hasjs");if(pipeObj!=null&&pipeObj!='undefined'&&pipeObj!=''){pipeObj.parent().css("background","none");}});function assertNotEmpty(control){assertNotEmpty(control,'');}
function assertNotEmpty(control,message){var reg=/\S/g;if(control.value==null||control.value==''||control.value.match(reg)==null){if(message!=null&&message!=''){alert(message);}
control.focus();control.select();return false;}
return true;}
function assertNotEmptyString(thisString){var reg=/\S/g;if(thisString==null||thisString==''||thisString.match(reg)==null){return false;}
return true;}
var Validator=Class.create();Validator.prototype={initialize:function(className,error,test,options){if(typeof test==='function'){this.options=$H(options);this._test=test;}else{this.options=$H(test);this._test=function(){return true;};}
this.error=error||'Validation failed.';this.className=className;},test:function(v,elm){return(this._test(v,elm)&&this.options.all(function(p){return Validator.methods[p.key]?Validator.methods[p.key](v,elm,p.value):true;}));}};Validator.methods={pattern:function(v,elm,opt){return Validation.get('IsEmpty').test(v)||opt.test(v);},minLength:function(v,elm,opt){return v.length>=opt;},maxLength:function(v,elm,opt){return v.length<=opt;},min:function(v,elm,opt){return v>=parseFloat(opt);},max:function(v,elm,opt){return v<=parseFloat(opt);},notOneOf:function(v,elm,opt){return $A(opt).all(function(value){return v!==value;});},oneOf:function(v,elm,opt){return $A(opt).any(function(value){return v===value;});},'is':function(v,elm,opt){return v===opt;},isNot:function(v,elm,opt){return v!==opt;},equalToField:function(v,elm,opt){return v===$F(opt);},notEqualToField:function(v,elm,opt){return v!==$F(opt);},include:function(v,elm,opt){return $A(opt).all(function(value){return Validation.get(value).test(v,elm);});}};var Validation=Class.create();Validation.prototype={initialize:function(form,options){this.options=Object.extend({onSubmit:true,stopOnFirst:false,immediate:false,focusOnError:true,useTitles:false,onFormValidate:function(result,form){},onElementValidate:function(result,elm){}},options||{});this.form=$(form);if(this.options.onSubmit){Event.observe(this.form,'submit',this.onSubmit.bind(this),false);}
if(this.options.immediate){var useTitles=this.options.useTitles;var callback=this.options.onElementValidate;Form.getElements(this.form).each(function(input){Event.observe(input,'blur',function(ev){Validation.validate(Event.element(ev),{useTitle:useTitles,onElementValidate:callback});});});}},onSubmit:function(ev){if(!this.validate()){Event.stop(ev);}},validate:function(){var result=false;var useTitles=this.options.useTitles;var callback=this.options.onElementValidate;if(this.options.stopOnFirst){result=Form.getElements(this.form).all(function(elm){return Validation.validate(elm,{useTitle:useTitles,onElementValidate:callback});});}else{result=Form.getElements(this.form).collect(function(elm){return Validation.validate(elm,{useTitle:useTitles,onElementValidate:callback});}).all();}
if(!result&&this.options.focusOnError){Form.getElements(this.form).findAll(function(elm){return $(elm).hasClassName('validation-failed');}).first().focus();}
this.options.onFormValidate(result,this.form);return result;},reset:function(){Form.getElements(this.form).each(Validation.reset);}};Object.extend(Validation,{validate:function(elm,options){options=Object.extend({useTitle:false,onElementValidate:function(result,elm){}},options||{});elm=$(elm);var cn=elm.classNames();var result=cn.all(function(value){var test=Validation.test(value,elm,options.useTitle);options.onElementValidate(test,elm);return test;});return result;},test:function(name,elm,useTitle){var v=Validation.get(name);var prop='__advice'+name.camelize();try{if(Validation.isVisible(elm)&&!v.test($F(elm),elm)){if(!elm[prop]){var advice=Validation.getAdvice(name,elm);if(advice===null){var errorMsg=useTitle?((elm&&elm.title)?elm.title:v.error):v.error;advice='<label class="validation-advice error txtSmaller" id="advice-'+
name+'-'+Validation.getElmID(elm)+'" style="display:none"><span>&nbsp;</span>'+errorMsg+'</label>';switch(elm.type.toLowerCase()){case'checkbox':case'radio':var p=elm.parentNode;if(p){new Insertion.Bottom(p,advice);}else{new Insertion.After(elm,advice);}
break;default:new Insertion.After(elm.parentNode,advice);}
advice=Validation.getAdvice(name,elm);}
if(typeof Effect=='undefined'){advice.style.display='block';}else{new Effect.Appear(advice,{duration:1});}}
elm[prop]=true;elm.removeClassName('validation-passed');elm.addClassName('validation-failed');return false;}else{var advice=Validation.getAdvice(name,elm);if(advice!=null)advice.hide();elm[prop]='';elm.removeClassName('validation-failed');elm.addClassName('validation-passed');return true;}}catch(e){throw(e);}},isVisible:function(elm){while(elm.tagName!='BODY'){if(!$(elm).visible())return false;elm=elm.parentNode;}
return true;},getAdvice:function(name,elm){return $('advice-'+name+'-'+Validation.getElmID(elm))||$('advice-'+Validation.getElmID(elm));},getElmID:function(elm){return elm.id?elm.id:elm.name;},reset:function(elm){elm=$(elm);var cn=elm.classNames();cn.each(function(value){var prop='__advice'+value.camelize();if(elm[prop]){var advice=Validation.getAdvice(value,elm);advice.hide();elm[prop]='';}
elm.removeClassName('validation-failed');elm.removeClassName('validation-passed');});},add:function(className,error,test,options){var nv={};nv[className]=new Validator(className,error,test,options);Object.extend(Validation.methods,nv);},addAllThese:function(validators){var nv={};$A(validators).each(function(value){nv[value[0]]=new Validator(value[0],value[1],value[2],(value.length>3?value[3]:{}));});Object.extend(Validation.methods,nv);},get:function(name){return Validation.methods[name]?Validation.methods[name]:Validation.methods['_LikeNoIDIEverSaw_'];},methods:{'_LikeNoIDIEverSaw_':new Validator('_LikeNoIDIEverSaw_','',{})}});Validation.add('IsEmpty','',function(v){return((v==null)||(v.length==0));});Validation.addAllThese([['required','This is a required field.',function(v){return!Validation.get('IsEmpty').test(v);}],['validate-number','Please enter a valid number in this field.',function(v){return Validation.get('IsEmpty').test(v)||(!isNaN(v)&&!/^\s+$/.test(v));}],['validate-digits','Please use numbers only in this field. please avoid spaces or other characters such as dots or commas.',function(v){return Validation.get('IsEmpty').test(v)||!/[^\d]/.test(v);}],['validate-alpha','Please use letters only (a-z) in this field.',function(v){return Validation.get('IsEmpty').test(v)||/^[a-zA-Z]+$/.test(v)}],['validate-alphanum','Please use only letters (a-z) or numbers (0-9) only in this field. No spaces or other characters are allowed.',function(v){return Validation.get('IsEmpty').test(v)||!/\W/.test(v)}],['validate-ascii','Please use only letters (a-z) or numbers (0-9) only in this field. No special characters are allowed.',function(v){return Validation.get('IsEmpty').test(v)||!/\S*[^\x00-\x7f]\S*/.test(v)}],['validate-date','Please enter a valid date.',function(v){if(Validation.get('IsEmpty').test(v))return true;var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex.test(v))return false;var d=new Date(v);return(parseInt(RegExp.$2,10)==(1+d.getMonth()))&&(parseInt(RegExp.$1,10)==d.getDate())&&(parseInt(RegExp.$3,10)==d.getFullYear());}],['validate-email','Please enter a valid email address. For example fred@domain.com .',function(v){return Validation.get('IsEmpty').test(v)||/\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,4}$/.test(v)}],['validate-url','Please enter a valid URL.',function(v){return Validation.get('IsEmpty').test(v)||/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(v)}],['validate-date-au','Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.',function(v){if(Validation.get('IsEmpty').test(v))return true;var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex.test(v))return false;var d=new Date(v.replace(regex,'$2/$1/$3'));return(parseInt(RegExp.$2,10)==(1+d.getMonth()))&&(parseInt(RegExp.$1,10)==d.getDate())&&(parseInt(RegExp.$3,10)==d.getFullYear());}],['validate-one-required','Please select one of the above options.',function(v,elm){var p=elm.parentNode;var options=p.getElementsByTagName('INPUT');return $A(options).any(function(elm){return $F(elm);});}]]);function validateSSOREG(){var ssoregRegistration=new Validation('ssoregForm');Validation.addAllThese([['validate-firstName','<em class="errText">First Name is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a first name and click Submit.</em>',{minLength:1}],['validate-firstNameInvalid','<em class="errText">Your First Name contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-familyName','<em class="errText">Family Name is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a family name and click Submit.</em>',{minLength:1}],['validate-familyNameInvalid','<em class="errText">Your Family Name contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em classs="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-emailAddress','<em class="errText">E-mail Address is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a complete e-mail address and click Submit.</em><br/><span>&nbsp;</span><em class="mainText">Example: john.smith@abc-university.edu</em>',{minLength:1}],['validate-emailInvalidAddress','<em class="errText">Incomplete E-mail Address entered.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a complete e-mail address and click Submit.</em><br/><span>&nbsp;</span><em class="mainText">Example: john.smith@abc-university.edu</em>',{include:['validate-email']}],['validate-password','<em class="errText">Password is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a password and click Submit.</em>',{minLength:1}],['validate-passwordInvalid','<em class="errText">Your Password contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-passwordLength','<em class="errText">Password must be between 5 and 20 characters in length.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a new password.</em>',{minLength:5,maxLength:20}],['validate-confirmPassword','<em class="errText">Confirm Password is required.</em><br/><span>&nbsp;</span><em class="mainText">Please confirm your password and click Submit.</em>',{minLength:1}],['validate-confirmPasswordInvalid','<em class="errText">Your Confirm Password contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em class="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{minLength:1,include:['validate-ascii']}],['validate-confirmPasswordLength','<em class="errText">Confirm Password must be between 5 and 20 characters in length.</em><br/><span>&nbsp;</span><em class="mainText">Please re-enter all Passwords.</em>',{minLength:5,maxLength:20}],['validate-passwordsMatch','<em class="errText">New Passwords do not match.</em><br/><span>&nbsp;</span><em class="mainText">Please re-enter all Passwords.</em>',{equalToField:'regPassword'}],['validate-role','<em class="errText">An invalid role was selected in the "Role" field.</em><br/><span>&nbsp;</span><em class="mainText">Please select a valid role and click Submit.</em>',{notOneOf:['0','']}],['validate-organizationType','<em class="errText">An invalid organization type was selected in the "Organization Type" field.</em><br/><span>&nbsp;</span><em class="mainText">Please select a valid organization type and click Submit</em>',{oneOf:['42','81','27','101','3']}],['validate-organizationTypeInvalid','<em class="errText">Your Organization Type contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-fieldOfInterest','<label class="error txtSmaller"><em class="errText">Primary field of interest is required.</em><br/><em class="mainText">Please select one or more fields of interest and click Submit.</em></label>',{include:['validate-one-required']}],['validate-jobtitle','<em class="errText">Your Job Title contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em class="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-jobtitlelong','<em class="errText">Job Title cannot be longer than 40 characters. Please try again.</em>',{maxLength:40}],['validate-phonenumber','<em class="errText">Your Phone Number contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-mailingAddress','<em class="errText">Your Mailing Address contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em class="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-address1','<em class="errText">First line of mailing address cannot be longer than 40 characters. Please try again.</em>',{maxLength:40}],['validate-address2','<em class="errText">Second line of mailing address cannot be longer than 40 characters. Please try again.</em>',{maxLength:40}],['validate-address3','<em class="errText">Third line of mailing address cannot be longer than 40 characters. Please try again.</em>',{maxLength:40}],['validate-city','<em class="errText">Your City name contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-citylong','<em class="errText">City cannot be longer than 40 characters. Please try again.</em>',{maxLength:40}],['validate-postalcode','<em class="errText">Postal code is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a Postal code and click Submit.</em>',function(v){return!(Validation.get('IsEmpty').test(v)&&$('country').value==='United States')}],['validate-postalcodeInvalid','<em class="errText">Your Postal Code contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em class="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-postalcodelong','<em class="errText">Postal code cannot be longer than 15 characters. Please try again.</em>',{maxLength:40}],['validate-RegFormuserAgreement','<label class="error txtSmaller"><span class="userAgr">&nbsp;</span><em class="errText">To register, you must agree to the Scopus Registered User Agreement.</em><br/><span class="userAgr">&nbsp;</span><em class="mainText">Please confirm that you accept these terms by checking the box.</em></label>',{include:['validate-one-required']}],['validate-userAgreement','<label class="error txtSmaller userAgr"><em class="errText">To continue, you must select the ScienceDirect and Scopus User Agreement checkbox.</em></label>',{include:['validate-one-required']}],['validate-profileFirstName','<em class="errText">First Name is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a first name and click Update.</em>',{minLength:1}],['validate-profileFirstNameInvalid','<em class="errText">Your First Name contains special characters which are not recognized by our registration system.</em><br/> <span>&nbsp;</span><em class="mainText">The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-profileFamilyName','<em class="errText">Family Name is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a family name and click Update.</em>',{minLength:1}],['validate-profileFamilyNameInvalid','<em class="errText">Your Family Name contains special characters which are not recognized by our registration system.</em><br/><span>&nbsp;</span><em classs="mainText"> The text you entered may not contain non-Roman or other special characters \(e.g. , , \). Please try again.</em>',{include:['validate-ascii']}],['validate-profileEmailAddress','<em class="errText">E-mail Address is required.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a complete e-mail address and click Update.</em><br/><span>&nbsp;</span><em class="mainText">Example: john.smith@abc-university.edu</em>',{minLength:1}],['validate-profileEmailInvalidAddress','<em class="errText">Incomplete E-mail Address entered.</em><br/><span>&nbsp;</span><em class="mainText">Please enter a complete e-mail address and click Update.</em><br/><span>&nbsp;</span><em class="mainText">Example: john.smith@abc-university.edu</em>',{include:['validate-email']}],['validate-profileRole','<em class="errText">An invalid role was selected in the "Role" field.</em><br/><span>&nbsp;</span><em class="mainText">Please select a valid role and click Update.</em>',{notOneOf:['0','']}],['validate-profileFieldOfInterest','<label class="error txtSmaller"><em class="errText">Primary field of interest is required.</em><br/><em class="mainText">Please select one or more fields of interest and click Update.</em></label>',{include:['validate-one-required']}]]);};(function(selectBoxIt){"use strict";selectBoxIt(window.jQuery,window,document);}
(function($,window,document,undefined){"use strict";$.widget("selectBox.selectBoxIt",{VERSION:"3.7.0",options:{"showEffect":"none","showEffectOptions":{},"showEffectSpeed":"medium","hideEffect":"none","hideEffectOptions":{},"hideEffectSpeed":"medium","showFirstOption":true,"defaultText":"","defaultIcon":"","downArrowIcon":"","theme":"default","keydownOpen":true,"isMobile":function(){var ua=navigator.userAgent||navigator.vendor||window.opera;return(/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);},"native":false,"aggressiveChange":false,"selectWhenHidden":true,"viewport":$(window),"similarSearch":false,"copyAttributes":["title","rel"],"copyClasses":"button","nativeMousedown":false,"customShowHideEvent":false,"autoWidth":false,"html":true,"populate":"","dynamicPositioning":true,"hideCurrent":false},"getThemes":function(){var self=this,theme=$(self.element).attr("data-theme")||"c";return{"bootstrap":{"focus":"active","hover":"","enabled":"enabled","disabled":"disabled","arrow":"caret","button":"btn","list":"dropdown-menu","container":"bootstrap","open":"open"},"jqueryui":{"focus":"ui-state-focus","hover":"ui-state-hover","enabled":"ui-state-enabled","disabled":"ui-state-disabled","arrow":"ui-icon ui-icon-triangle-1-s","button":"ui-widget ui-state-default","list":"ui-widget ui-widget-content","container":"jqueryui","open":"selectboxit-open"},"jquerymobile":{"focus":"ui-btn-down-"+theme,"hover":"ui-btn-hover-"+theme,"enabled":"ui-enabled","disabled":"ui-disabled","arrow":"ui-icon ui-icon-arrow-d ui-icon-shadow","button":"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+theme,"list":"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+theme,"container":"jquerymobile","open":"selectboxit-open"},"default":{"focus":"selectboxit-focus","hover":"selectboxit-hover","enabled":"selectboxit-enabled","disabled":"selectboxit-disabled","arrow":"selectboxit-default-arrow","button":"selectboxit-btn","list":"selectboxit-list","container":"selectboxit-container","open":"selectboxit-open"}};},isDeferred:function(def){return $.isPlainObject(def)&&def.promise&&def.done;},_create:function(internal){var self=this,populateOption=self.options["populate"];if(!self.element.is("select")){return;}
self.widgetProto=$.Widget.prototype;self.originalElem=self.element[0];self.selectBox=self.element;if(self.options["populate"]&&self.add&&!internal){self.add(populateOption);}
self.selectItems=self.element.find("option");self.firstSelectItem=self.selectItems.slice(0,1);self.documentHeight=$(document).height();self.theme=self.getThemes()[self.options["theme"]]||self.getThemes()["default"];self.currentFocus=0;self.blur=true;self.textArray=[];self.currentIndex=0;self.currentText="";self.flipped=false;if(!internal){self.selectBoxStyles=self.selectBox.attr("style");}
self._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(self.theme)._eventHandlers();if(self.originalElem.disabled&&self.disable){self.disable();}
if(self._ariaAccessibility){self._ariaAccessibility();}
self.isMobile=self.options["isMobile"]();if(self._mobile){self._mobile();}
if(self.options["native"]){this._applyNativeSelect();}
self.triggerEvent("create");return self;},_createDropdownButton:function(){var self=this,originalElemId=self.originalElemId=self.originalElem.id||"",originalElemValue=self.originalElemValue=self.originalElem.value||"",originalElemName=self.originalElemName=self.originalElem.name||"",copyClasses=self.options["copyClasses"],selectboxClasses=self.selectBox.attr("class")||"";self.dropdownText=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItText","class":"selectboxit-text","unselectable":"on","text":self.firstSelectItem.text()}).attr("data-val",originalElemValue);self.dropdownImageContainer=$("<span/>",{"class":"selectboxit-option-icon-container"});self.dropdownImage=$("<i/>",{"id":originalElemId&&originalElemId+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon","unselectable":"on"});self.dropdown=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxIt","class":"selectboxit "+(copyClasses==="button"?selectboxClasses:"")+" "+(self.selectBox.prop("disabled")?self.theme["disabled"]:self.theme["enabled"]),"name":originalElemName,"tabindex":self.selectBox.attr("tabindex")||"0","unselectable":"on"}).append(self.dropdownImageContainer.append(self.dropdownImage)).append(self.dropdownText);self.dropdownContainer=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItContainer","class":"selectboxit-container "+(copyClasses==="container"?selectboxClasses:"")}).append(self.dropdown);return self;},_createUnorderedList:function(){var self=this,dataDisabled,optgroupClass,optgroupElement,iconClass,iconUrl,iconUrlClass,iconUrlStyle,currentItem="",originalElemId=self.originalElemId||"",createdList=$("<ul/>",{"id":originalElemId&&originalElemId+"SelectBoxItOptions","class":"selectboxit-options","tabindex":-1}),currentDataSelectedText,currentDataText,currentText,parent;if(!self.options["showFirstOption"]){self.selectItems.first().attr("disabled","disabled");self.selectItems=self.selectBox.find("option").slice(1);}
self.selectItems.each(function(index){optgroupClass="";optgroupElement="";dataDisabled=$(this).prop("disabled");iconClass=$(this).attr("data-icon")||"";iconUrl=$(this).attr("data-iconurl")||"";iconUrlClass=iconUrl?"selectboxit-option-icon-url":"";iconUrlStyle=iconUrl?'style="background-image:url(\''+iconUrl+'\');"':"";currentDataSelectedText=$(this).attr("data-selectedtext");currentDataText=$(this).attr("data-text");currentText=currentDataText?currentDataText:$(this).html();parent=$(this).parent();if(parent.is("optgroup")){optgroupClass="selectboxit-optgroup-option";if($(this).index()===0){optgroupElement='<span class="selectboxit-optgroup-header '+parent.first().attr("class")+'"data-disabled="true">'+parent.first().attr("label")+'</span>';}}
currentItem+=optgroupElement+'<li id="'+index+'" data-val="'+this.value+'" data-disabled="'+dataDisabled+'" class="'+optgroupClass+" selectboxit-option "+($(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+iconClass+' '+(iconUrlClass||self.theme["container"])+'"'+iconUrlStyle+'></i></span>'+(self.options["html"]?currentText:self.htmlEscape(currentText))+'</a></li>';self.textArray[index]=dataDisabled?"":currentText;if(this.selected){self._setText(self.dropdownText,currentDataSelectedText||currentText);self.currentFocus=index;}});if((self.options["defaultText"]||self.selectBox.attr("data-text"))){var defaultedText=self.options["defaultText"]||self.selectBox.attr("data-text");self._setText(self.dropdownText,defaultedText);self.options["defaultText"]=defaultedText;}
createdList.append(currentItem);self.list=createdList;self.dropdownContainer.append(self.list);self.listItems=self.list.children("li");self.listAnchors=self.list.find("a");self.listItems.first().addClass("selectboxit-option-first");self.listItems.last().addClass("selectboxit-option-last");self.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(self.theme["disabled"]);self.dropdownImage.addClass(self.selectBox.attr("data-icon")||self.options["defaultIcon"]||self.listItems.eq(self.currentFocus).find("i").attr("class"));self.dropdownImage.attr("style",self.listItems.eq(self.currentFocus).find("i").attr("style"));return self;},_replaceSelectBox:function(){var self=this,height,originalElemId=self.originalElem.id||"",size=self.selectBox.attr("data-size"),listSize=self.listSize=size===undefined?"auto":size==="0"||"size"==="auto"?"auto":+size;self.selectBox.css("display","none").after(self.dropdownContainer);height=self.dropdown.height();self.downArrow=$("<i/>",{"id":originalElemId&&originalElemId+"SelectBoxItArrow","class":"selectboxit-arrow","unselectable":"on"});self.downArrowContainer=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container","unselectable":"on"}).append(self.downArrow);self.dropdown.append(self.downArrowContainer);self.listItems.removeClass("selectboxit-selected").eq(self.currentFocus).addClass("selectboxit-selected");if(!self._realOuterWidth(self.dropdownImageContainer)){self.dropdownImageContainer.remove();}
if(self.options["autoWidth"]){if(self.dropdown.is(":visible")){self.dropdown.css({"width":"auto"}).css({"width":self.list.outerWidth(true)+self.downArrowContainer.outerWidth(true)+self.dropdownImage.outerWidth(true)});}
else{self.dropdown.css({"width":"auto"}).css({"width":self._realOuterWidth(self.list)+self._realOuterWidth(self.downArrowContainer)+self._realOuterWidth(self.dropdownImage)});}
self.list.css({"min-width":self.dropdown.width()});}
self.dropdownContainer.addClass('selectboxit-rendering');self.dropdownText.css({"max-width":self.dropdownContainer.outerWidth(true)-(self.downArrowContainer.outerWidth(true)+self.dropdownImage.outerWidth(true))});self.dropdownContainer.removeClass('selectboxit-rendering');if($.type(listSize)==="number"){self.maxHeight=self.listAnchors.outerHeight(true)*listSize;}
return self;},_scrollToView:function(type){var self=this,currentOption=self.listItems.eq(self.currentFocus),listScrollTop=self.list.scrollTop(),currentItemHeight=currentOption.height(),currentTopPosition=currentOption.position().top,absCurrentTopPosition=Math.abs(currentTopPosition),listHeight=self.list.height(),currentText;if(type==="search"){if(listHeight-currentTopPosition<currentItemHeight){self.list.scrollTop(listScrollTop+(currentTopPosition-(listHeight-currentItemHeight)));}
else if(currentTopPosition<-1){self.list.scrollTop(currentTopPosition-currentItemHeight);}}
else if(type==="up"){if(currentTopPosition<-1){self.list.scrollTop(listScrollTop-absCurrentTopPosition);}}
else if(type==="down"){if(listHeight-currentTopPosition<currentItemHeight){self.list.scrollTop((listScrollTop+(absCurrentTopPosition-listHeight+currentItemHeight)));}}
return self;},_callbackSupport:function(callback){var self=this;if($.isFunction(callback)){callback.call(self,self.dropdown);}
return self;},_setText:function(elem,currentText){var self=this;if(self.options["html"]){elem.html(currentText);}
else{elem.text(currentText);}
return self;},open:function(callback){var self=this,showEffect=self.options["showEffect"],showEffectSpeed=self.options["showEffectSpeed"],showEffectOptions=self.options["showEffectOptions"],isNative=self.options["native"],isMobile=self.isMobile;if(!self.listItems.length||self.dropdown.hasClass(self.theme["disabled"])){return self;}
if((!isNative&&!isMobile)&&!this.list.is(":visible")){self.triggerEvent("open");if(self._dynamicPositioning&&self.options["dynamicPositioning"]){self._dynamicPositioning();}
if(showEffect==="none"){self.list.show();}
else if(showEffect==="show"||showEffect==="slideDown"||showEffect==="fadeIn"){self.list[showEffect](showEffectSpeed);}
else{self.list.show(showEffect,showEffectOptions,showEffectSpeed);}
self.list.promise().done(function(){self._scrollToView("search");});}
self._callbackSupport(callback);return self;},close:function(callback){var self=this,hideEffect=self.options["hideEffect"],hideEffectSpeed=self.options["hideEffectSpeed"],hideEffectOptions=self.options["hideEffectOptions"],isNative=self.options["native"],isMobile=self.isMobile;if((!isNative&&!isMobile)&&self.list.is(":visible")){self.triggerEvent("close");if(hideEffect==="none"){self.list.hide();}
else if(hideEffect==="hide"||hideEffect==="slideUp"||hideEffect==="fadeOut"){self.list[hideEffect](hideEffectSpeed);}
else{self.list.hide(hideEffect,hideEffectOptions,hideEffectSpeed);}}
self._callbackSupport(callback);return self;},toggle:function(){var self=this,listIsVisible=self.list.is(":visible");if(listIsVisible){self.close();}
else if(!listIsVisible){self.open();}},_keyMappings:{"38":"up","40":"down","13":"enter","8":"backspace","9":"tab","32":"space","27":"esc"},_keydownMethods:function(){var self=this,moveToOption=self.list.is(":visible")||!self.options["keydownOpen"];return{"down":function(){if(self.moveDown&&moveToOption){self.moveDown();}},"up":function(){if(self.moveUp&&moveToOption){self.moveUp();}},"enter":function(){var activeElem=self.listItems.eq(self.currentFocus);self._update(activeElem);if(activeElem.attr("data-preventclose")!=="true"){self.close();}
self.triggerEvent("enter");},"tab":function(){self.triggerEvent("tab-blur");self.close();},"backspace":function(){self.triggerEvent("backspace");},"esc":function(){self.close();}};},_eventHandlers:function(){var self=this,nativeMousedown=self.options["nativeMousedown"],customShowHideEvent=self.options["customShowHideEvent"],currentDataText,currentText,focusClass=self.focusClass,hoverClass=self.hoverClass,openClass=self.openClass;this.dropdown.on({"click.selectBoxIt":function(){self.dropdown.trigger("focus",true);if(!self.originalElem.disabled){self.triggerEvent("click");if(!nativeMousedown&&!customShowHideEvent){self.toggle();}}},"mousedown.selectBoxIt":function(){$(this).data("mdown",true);self.triggerEvent("mousedown");if(nativeMousedown&&!customShowHideEvent){self.toggle();}},"mouseup.selectBoxIt":function(){self.triggerEvent("mouseup");},"blur.selectBoxIt":function(){if(self.blur){self.triggerEvent("blur");self.close();$(this).removeClass(focusClass);}},"focus.selectBoxIt":function(event,internal){var mdown=$(this).data("mdown");$(this).removeData("mdown");if(!mdown&&!internal){setTimeout(function(){self.triggerEvent("tab-focus");},0);}
if(!internal){if(!$(this).hasClass(self.theme["disabled"])){$(this).addClass(focusClass);}
self.triggerEvent("focus");}},"keydown.selectBoxIt":function(e){var currentKey=self._keyMappings[e.keyCode],keydownMethod=self._keydownMethods()[currentKey];if(keydownMethod){keydownMethod();if(self.options["keydownOpen"]&&(currentKey==="up"||currentKey==="down")){self.open();}}
if(keydownMethod&&currentKey!=="tab"){e.preventDefault();}},"keypress.selectBoxIt":function(e){var currentKey=e.charCode||e.keyCode,key=self._keyMappings[e.charCode||e.keyCode],alphaNumericKey=String.fromCharCode(currentKey);if(self.search&&(!key||(key&&key==="space"))){self.search(alphaNumericKey,true,true);}
if(key==="space"){e.preventDefault();}},"mouseenter.selectBoxIt":function(){self.triggerEvent("mouseenter");},"mouseleave.selectBoxIt":function(){self.triggerEvent("mouseleave");}});self.list.on({"mouseover.selectBoxIt":function(){self.blur=false;},"mouseout.selectBoxIt":function(){self.blur=true;},"focusin.selectBoxIt":function(){self.dropdown.trigger("focus",true);}});self.list.on({"mousedown.selectBoxIt":function(){self._update($(this));self.triggerEvent("option-click");if($(this).attr("data-disabled")==="false"&&$(this).attr("data-preventclose")!=="true"){self.close();}
setTimeout(function(){self.dropdown.trigger('focus',true);},0);},"focusin.selectBoxIt":function(){self.listItems.not($(this)).removeAttr("data-active");$(this).attr("data-active","");var listIsHidden=self.list.is(":hidden");if((self.options["searchWhenHidden"]&&listIsHidden)||self.options["aggressiveChange"]||(listIsHidden&&self.options["selectWhenHidden"])){self._update($(this));}
$(this).addClass(focusClass);},"mouseup.selectBoxIt":function(){if(nativeMousedown&&!customShowHideEvent){self._update($(this));self.triggerEvent("option-mouseup");if($(this).attr("data-disabled")==="false"&&$(this).attr("data-preventclose")!=="true"){self.close();}}},"mouseenter.selectBoxIt":function(){if($(this).attr("data-disabled")==="false"){self.listItems.removeAttr("data-active");$(this).addClass(focusClass).attr("data-active","");self.listItems.not($(this)).removeClass(focusClass);$(this).addClass(focusClass);self.currentFocus=+$(this).attr("id");}},"mouseleave.selectBoxIt":function(){if($(this).attr("data-disabled")==="false"){self.listItems.not($(this)).removeClass(focusClass).removeAttr("data-active");$(this).addClass(focusClass);self.currentFocus=+$(this).attr("id");}},"blur.selectBoxIt":function(){$(this).removeClass(focusClass);}},".selectboxit-option");self.list.on({"click.selectBoxIt":function(ev){ev.preventDefault();}},"a");self.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(event,internal){var currentOption,currentDataSelectedText;if(!internal){currentOption=self.list.find('li[data-val="'+self.originalElem.value+'"]');if(currentOption.length){self.listItems.eq(self.currentFocus).removeClass(self.focusClass);self.currentFocus=+currentOption.attr("id");}}
currentOption=self.listItems.eq(self.currentFocus);currentDataSelectedText=currentOption.attr("data-selectedtext");currentDataText=currentOption.attr("data-text");currentText=currentDataText?currentDataText:currentOption.find("a").text();self._setText(self.dropdownText,currentDataSelectedText||currentText);self.dropdownText.attr("data-val",self.originalElem.value);if(currentOption.find("i").attr("class")){self.dropdownImage.attr("class",currentOption.find("i").attr("class")).addClass("selectboxit-default-icon");self.dropdownImage.attr("style",currentOption.find("i").attr("style"));}
self.triggerEvent("changed");},"disable.selectBoxIt":function(){self.dropdown.addClass(self.theme["disabled"]);},"enable.selectBoxIt":function(){self.dropdown.removeClass(self.theme["disabled"]);},"open.selectBoxIt":function(){var currentElem=self.list.find("li[data-val='"+self.dropdownText.attr("data-val")+"']"),activeElem;if(!currentElem.length){currentElem=self.listItems.not("[data-disabled=true]").first();}
self.currentFocus=+currentElem.attr("id");activeElem=self.listItems.eq(self.currentFocus);self.dropdown.addClass(openClass).removeClass(hoverClass).addClass(focusClass);self.listItems.removeClass(self.selectedClass).removeAttr("data-active").not(activeElem).removeClass(focusClass);activeElem.addClass(self.selectedClass).addClass(focusClass);if(self.options.hideCurrent){self.listItems.show();activeElem.hide();}},"close.selectBoxIt":function(){self.dropdown.removeClass(openClass);},"blur.selectBoxIt":function(){self.dropdown.removeClass(focusClass);},"mouseenter.selectBoxIt":function(){if(!$(this).hasClass(self.theme["disabled"])){self.dropdown.addClass(hoverClass);}},"mouseleave.selectBoxIt":function(){self.dropdown.removeClass(hoverClass);},"destroy":function(ev){ev.preventDefault();ev.stopPropagation();}});return self;},_update:function(elem){var self=this,currentDataSelectedText,currentDataText,currentText,defaultText=self.options["defaultText"]||self.selectBox.attr("data-text"),currentElem=self.listItems.eq(self.currentFocus);if(elem.attr("data-disabled")==="false"){currentDataSelectedText=self.listItems.eq(self.currentFocus).attr("data-selectedtext");currentDataText=currentElem.attr("data-text");currentText=currentDataText?currentDataText:currentElem.text();if((defaultText&&self.options["html"]?self.dropdownText.html()===defaultText:self.dropdownText.text()===defaultText)&&self.selectBox.val()===elem.attr("data-val")){self.triggerEvent("change");}
else{self.selectBox.val(elem.attr("data-val"));self.currentFocus=+elem.attr("id");if(self.originalElem.value!==self.dropdownText.attr("data-val")){self.triggerEvent("change");}}}},_addClasses:function(obj){var self=this,focusClass=self.focusClass=obj.focus,hoverClass=self.hoverClass=obj.hover,buttonClass=obj.button,listClass=obj.list,arrowClass=obj.arrow,containerClass=obj.container,openClass=self.openClass=obj.open;self.selectedClass="selectboxit-selected";self.downArrow.addClass(self.selectBox.attr("data-downarrow")||self.options["downArrowIcon"]||arrowClass);self.dropdownContainer.addClass(containerClass);self.dropdown.addClass(buttonClass);self.list.addClass(listClass);return self;},refresh:function(callback,internal){var self=this;self._destroySelectBoxIt()._create(true);if(!internal){self.triggerEvent("refresh");}
self._callbackSupport(callback);return self;},htmlEscape:function(str){return String(str).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");},triggerEvent:function(eventName){var self=this,currentIndex=self.options["showFirstOption"]?self.currentFocus:((self.currentFocus-1)>=0?self.currentFocus:0);self.selectBox.trigger(eventName,{"selectbox":self.selectBox,"selectboxOption":self.selectItems.eq(currentIndex),"dropdown":self.dropdown,"dropdownOption":self.listItems.eq(self.currentFocus)});return self;},_copyAttributes:function(){var self=this;if(self._addSelectBoxAttributes){self._addSelectBoxAttributes();}
return self;},_realOuterWidth:function(elem){if(elem.is(":visible")){return elem.outerWidth(true);}
var self=this,clonedElem=elem.clone(),outerWidth;clonedElem.css({"visibility":"hidden","display":"block","position":"absolute"}).appendTo("body");outerWidth=clonedElem.outerWidth(true);clonedElem.remove();return outerWidth;}});var selectBoxIt=$.selectBox.selectBoxIt.prototype;selectBoxIt.add=function(data,callback){this._populate(data,function(data){var self=this,dataType=$.type(data),value,x=0,dataLength,elems=[],isJSON=self._isJSON(data),parsedJSON=isJSON&&self._parseJSON(data);if(data&&(dataType==="array"||(isJSON&&parsedJSON.data&&$.type(parsedJSON.data)==="array"))||(dataType==="object"&&data.data&&$.type(data.data)==="array")){if(self._isJSON(data)){data=parsedJSON;}
if(data.data){data=data.data;}
for(dataLength=data.length;x<=dataLength-1;x+=1){value=data[x];if($.isPlainObject(value)){elems.push($("<option/>",value));}
else if($.type(value)==="string"){elems.push($("<option/>",{text:value,value:value}));}}
self.selectBox.append(elems);}
else if(data&&dataType==="string"&&!self._isJSON(data)){self.selectBox.append(data);}
else if(data&&dataType==="object"){self.selectBox.append($("<option/>",data));}
else if(data&&self._isJSON(data)&&$.isPlainObject(self._parseJSON(data))){self.selectBox.append($("<option/>",self._parseJSON(data)));}
if(self.dropdown){self.refresh(function(){self._callbackSupport(callback);},true);}else{self._callbackSupport(callback);}
return self;});};selectBoxIt._parseJSON=function(data){return(JSON&&JSON.parse&&JSON.parse(data))||$.parseJSON(data);};selectBoxIt._isJSON=function(data){var self=this,json;try{json=self._parseJSON(data);return true;}catch(e){return false;}};selectBoxIt._populate=function(data,callback){var self=this;data=$.isFunction(data)?data.call():data;if(self.isDeferred(data)){data.done(function(returnedData){callback.call(self,returnedData);});}
else{callback.call(self,data);}
return self;};selectBoxIt._ariaAccessibility=function(){var self=this,dropdownLabel=$("label[for='"+self.originalElem.id+"']");self.dropdownContainer.attr({"role":"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":self.list[0].id});self.dropdownText.attr({"aria-live":"polite"});self.dropdown.on({"disable.selectBoxIt":function(){self.dropdownContainer.attr("aria-disabled","true");},"enable.selectBoxIt":function(){self.dropdownContainer.attr("aria-disabled","false");}});if(dropdownLabel.length){self.dropdownContainer.attr("aria-labelledby",dropdownLabel[0].id);}
self.list.attr({"role":"listbox","aria-hidden":"true"});self.listItems.attr({"role":"option"});self.selectBox.on({"open.selectBoxIt":function(){self.list.attr("aria-hidden","false");self.dropdownContainer.attr("aria-expanded","true");},"close.selectBoxIt":function(){self.list.attr("aria-hidden","true");self.dropdownContainer.attr("aria-expanded","false");}});return self;};selectBoxIt._addSelectBoxAttributes=function(){var self=this;self._addAttributes(self.selectBox.prop("attributes"),self.dropdown);self.selectItems.each(function(iterator){self._addAttributes($(this).prop("attributes"),self.listItems.eq(iterator));});return self;};selectBoxIt._addAttributes=function(arr,elem){var self=this,whitelist=self.options["copyAttributes"];if(arr.length){$.each(arr,function(iterator,property){var propName=(property.name).toLowerCase(),propValue=property.value;if(propValue!=="null"&&($.inArray(propName,whitelist)!==-1||propName.indexOf("data")!==-1)){elem.attr(propName,propValue);}});}
return self;};selectBoxIt.destroy=function(callback){var self=this;self._destroySelectBoxIt();self.widgetProto.destroy.call(self);self._callbackSupport(callback);return self;};selectBoxIt._destroySelectBoxIt=function(){var self=this;self.dropdown.off(".selectBoxIt");if($.contains(self.dropdownContainer[0],self.originalElem)){self.dropdownContainer.before(self.selectBox);}
self.dropdownContainer.remove();self.selectBox.removeAttr("style").attr("style",self.selectBoxStyles);self.selectBox.show();self.triggerEvent("destroy");return self;};selectBoxIt.disable=function(callback){var self=this;if(!self.options["disabled"]){self.close();self.selectBox.attr("disabled","disabled");self.dropdown.removeAttr("tabindex").removeClass(self.theme["enabled"]).addClass(self.theme["disabled"]);self.setOption("disabled",true);self.triggerEvent("disable");}
self._callbackSupport(callback);return self;};selectBoxIt.disableOption=function(index,callback){var self=this,currentSelectBoxOption,hasNextEnabled,hasPreviousEnabled,type=$.type(index);if(type==="number"){self.close();currentSelectBoxOption=self.selectBox.find("option").eq(index);self.triggerEvent("disable-option");currentSelectBoxOption.attr("disabled","disabled");self.listItems.eq(index).attr("data-disabled","true").addClass(self.theme["disabled"]);if(self.currentFocus===index){hasNextEnabled=self.listItems.eq(self.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;hasPreviousEnabled=self.listItems.eq(self.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(hasNextEnabled){self.moveDown();}
else if(hasPreviousEnabled){self.moveUp();}
else{self.disable();}}}
self._callbackSupport(callback);return self;};selectBoxIt._isDisabled=function(callback){var self=this;if(self.originalElem.disabled){self.disable();}
return self;};selectBoxIt._dynamicPositioning=function(){var self=this;if($.type(self.listSize)==="number"){self.list.css("max-height",self.maxHeight||"none");}
else{var listOffsetTop=self.dropdown.offset().top,listHeight=self.list.data("max-height")||self.list.outerHeight(),selectBoxHeight=self.dropdown.outerHeight(),viewport=self.options["viewport"],viewportHeight=viewport.height(),viewportScrollTop=$.isWindow(viewport.get(0))?viewport.scrollTop():viewport.offset().top,topToBottom=(listOffsetTop+selectBoxHeight+listHeight<=viewportHeight+viewportScrollTop),bottomReached=!topToBottom;if(!self.list.data("max-height")){self.list.data("max-height",self.list.outerHeight());}
if(!bottomReached){self.list.css("max-height",listHeight);self.list.css("top","auto");}
else if((self.dropdown.offset().top-viewportScrollTop)>=listHeight){self.list.css("max-height",listHeight);self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}
else{var outsideBottomViewport=Math.abs((listOffsetTop+selectBoxHeight+listHeight)-(viewportHeight+viewportScrollTop)),outsideTopViewport=Math.abs((self.dropdown.offset().top-viewportScrollTop)-listHeight);if(outsideBottomViewport<outsideTopViewport){self.list.css("max-height",listHeight-outsideBottomViewport-(selectBoxHeight/2));self.list.css("top","auto");}
else{self.list.css("max-height",listHeight-outsideTopViewport-(selectBoxHeight/2));self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}}}
return self;};selectBoxIt.enable=function(callback){var self=this;if(self.options["disabled"]){self.triggerEvent("enable");self.selectBox.removeAttr("disabled");self.dropdown.attr("tabindex",0).removeClass(self.theme["disabled"]).addClass(self.theme["enabled"]);self.setOption("disabled",false);self._callbackSupport(callback);}
return self;};selectBoxIt.enableOption=function(index,callback){var self=this,currentSelectBoxOption,currentIndex=0,hasNextEnabled,hasPreviousEnabled,type=$.type(index);if(type==="number"){currentSelectBoxOption=self.selectBox.find("option").eq(index);self.triggerEvent("enable-option");currentSelectBoxOption.removeAttr("disabled");self.listItems.eq(index).attr("data-disabled","false").removeClass(self.theme["disabled"]);}
self._callbackSupport(callback);return self;};selectBoxIt.moveDown=function(callback){var self=this;self.currentFocus+=1;var disabled=self.listItems.eq(self.currentFocus).attr("data-disabled")==="true"?true:false,hasNextEnabled=self.listItems.eq(self.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(self.currentFocus===self.listItems.length){self.currentFocus-=1;}
else if(disabled&&hasNextEnabled){self.listItems.eq(self.currentFocus-1).blur();self.moveDown();return;}
else if(disabled&&!hasNextEnabled){self.currentFocus-=1;}
else{self.listItems.eq(self.currentFocus-1).blur().end().eq(self.currentFocus).focusin();self._scrollToView("down");self.triggerEvent("moveDown");}
self._callbackSupport(callback);return self;};selectBoxIt.moveUp=function(callback){var self=this;self.currentFocus-=1;var disabled=self.listItems.eq(self.currentFocus).attr("data-disabled")==="true"?true:false,hasPreviousEnabled=self.listItems.eq(self.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(self.currentFocus===-1){self.currentFocus+=1;}
else if(disabled&&hasPreviousEnabled){self.listItems.eq(self.currentFocus+1).blur();self.moveUp();return;}
else if(disabled&&!hasPreviousEnabled){self.currentFocus+=1;}
else{self.listItems.eq(this.currentFocus+1).blur().end().eq(self.currentFocus).focusin();self._scrollToView("up");self.triggerEvent("moveUp");}
self._callbackSupport(callback);return self;};selectBoxIt._setCurrentSearchOption=function(currentOption){var self=this;if((self.options["aggressiveChange"]||self.options["selectWhenHidden"]||self.listItems.eq(currentOption).is(":visible"))&&self.listItems.eq(currentOption).data("disabled")!==true){self.listItems.eq(self.currentFocus).blur();self.currentIndex=currentOption;self.currentFocus=currentOption;self.listItems.eq(self.currentFocus).focusin();self._scrollToView("search");self.triggerEvent("search");}
return self;};selectBoxIt._searchAlgorithm=function(currentIndex,alphaNumeric){var self=this,matchExists=false,x,y,arrayLength,currentSearch,textArray=self.textArray,currentText=self.currentText;for(x=currentIndex,arrayLength=textArray.length;x<arrayLength;x+=1){currentSearch=textArray[x];for(y=0;y<arrayLength;y+=1){if(textArray[y].search(alphaNumeric)!==-1){matchExists=true;y=arrayLength;}}
if(!matchExists){self.currentText=self.currentText.charAt(self.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");currentText=self.currentText;}
alphaNumeric=new RegExp(currentText,"gi");if(currentText.length<3){alphaNumeric=new RegExp(currentText.charAt(0),"gi");if((currentSearch.charAt(0).search(alphaNumeric)!==-1)){self._setCurrentSearchOption(x);if((currentSearch.substring(0,currentText.length).toLowerCase()!==currentText.toLowerCase())||self.options["similarSearch"]){self.currentIndex+=1;}
return false;}}
else{if((currentSearch.search(alphaNumeric)!==-1)){self._setCurrentSearchOption(x);return false;}}
if(currentSearch.toLowerCase()===self.currentText.toLowerCase()){self._setCurrentSearchOption(x);self.currentText="";return false;}}
return true;};selectBoxIt.search=function(alphaNumericKey,callback,rememberPreviousSearch){var self=this;if(rememberPreviousSearch){self.currentText+=alphaNumericKey.replace(/[|()\[{.+*?$\\]/g,"\\$0");}
else{self.currentText=alphaNumericKey.replace(/[|()\[{.+*?$\\]/g,"\\$0");}
var searchResults=self._searchAlgorithm(self.currentIndex,new RegExp(self.currentText,"gi"));if(searchResults){self._searchAlgorithm(0,self.currentText);}
self._callbackSupport(callback);return self;};selectBoxIt._applyNativeSelect=function(){var self=this,currentOption,currentDataText,currentText;self.dropdownContainer.append(self.selectBox);self.dropdown.attr('tabindex','-1');self.selectBox.css({"display":"block","visibility":"visible","width":self.dropdown.outerWidth(),"height":self.dropdown.outerHeight(),"opacity":"0","position":"absolute","top":"0","left":"0","cursor":"pointer","z-index":"999999","margin":self.dropdown.css("margin"),"padding":"0","-webkit-appearance":"menulist-button"}).on({"changed.selectBoxIt":function(){currentOption=self.selectBox.find("option").filter(":selected");currentDataText=currentOption.attr("data-text");currentText=currentDataText?currentDataText:currentOption.text();self._setText(self.dropdownText,currentText);if(self.list.find('li[data-val="'+currentOption.val()+'"]').find("i").attr("class")){self.dropdownImage.attr("class",self.list.find('li[data-val="'+currentOption.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon");}
self.triggerEvent("option-click");}});};selectBoxIt._mobile=function(callback){var self=this;if(self.isMobile){self._applyNativeSelect();}
return this;};selectBoxIt.remove=function(indexes,callback){var self=this,dataType=$.type(indexes),value,x=0,dataLength,elems="";if(dataType==="array"){for(dataLength=indexes.length;x<=dataLength-1;x+=1){value=indexes[x];if($.type(value)==="number"){if(elems.length){elems+=", option:eq("+value+")";}
else{elems+="option:eq("+value+")";}}}
self.selectBox.find(elems).remove();}
else if(dataType==="number"){self.selectBox.find("option").eq(indexes).remove();}
else{self.selectBox.find("option").remove();}
if(self.dropdown){self.refresh(function(){self._callbackSupport(callback);},true);}else{self._callbackSupport(callback);}
return self;};selectBoxIt.selectOption=function(val,callback){var self=this,type=$.type(val);if(type==="number"){self.selectBox.val(self.selectItems.eq(val).val()).change();}
else if(type==="string"){self.selectBox.val(val).change();}
self._callbackSupport(callback);return self;};selectBoxIt.setOption=function(key,value,callback){var self=this;if($.type(key)==="string"){self.options[key]=value;}
self.refresh(function(){self._callbackSupport(callback);},true);return self;};selectBoxIt.setOptions=function(newOptions,callback){var self=this;if($.isPlainObject(newOptions)){self.options=$.extend({},self.options,newOptions);}
self.refresh(function(){self._callbackSupport(callback);},true);return self;};selectBoxIt.wait=function(time,callback){var self=this;self.widgetProto._delay.call(self,callback,time);return self;};}));jQuery.fn.extend({objVal:function(){if(jQuery(this).length&&jQuery(this)[0].tagName.toLowerCase()=='input'){return jQuery(this).val();}
else{return jQuery(this).html();}},searchForPlaceholder:function(controls){if(controls){var targetObj=this;var targetId=this.attr('id');if((controls.left&&controls.left.enabled)||(controls.right&&controls.right.enabled)){jQuery(this).on("showSearchPlachold",function(evenyt){var targetId=jQuery(this).attr('id');var left=jQuery('#'+targetId+'_left');var right=jQuery('#'+targetId+'_right');var et=jQuery(this).objVal();if(et==''){if(left.length){left.show();}
if(right.length){right.show();}}});jQuery(this).on('keyup',controls,function(event){var et=jQuery(this).objVal();var controls=event.data;var id=jQuery(this).attr('id');var left=jQuery('#'+id+'_left');var right=jQuery('#'+id+'_right');if(et==''){if(controls.left.enabled){left.show();}
if(controls.right.enabled){right.show();}}
else{if(controls.left.enabled){left.hide();}
if(controls.right.enabled){right.hide();}}});jQuery(this).on('blur',controls,function(event){var et=jQuery(this).objVal();var controls=event.data;var id=jQuery(this).attr('id');if(et==''){if(controls.left.enabled){jQuery('#'+id+'_left').show();}
if(controls.right.enabled){jQuery('#'+id+'_right').show();}}
else{if(controls.left.enabled){jQuery('#'+id+'_left').hide();}
if(controls.right.enabled){jQuery('#'+id+'_right').hide();}}});if(controls.left.enabled){var valueToBeShown='';if(controls.left.type=='simple'){valueToBeShown=controls.left.value;}
else if(controls.left.type=='componant'){var reference=jQuery('#'+controls.left.value);valueToBeShown=reference.objVal();reference.on('change',{"id":targetId},function(event){jQuery('#'+event.data.id+'_left').html(jQuery(this).find('option:selected').text());});};jQuery('<span id="'+targetId+'_left" class="'+controls.left.classes+'">'+valueToBeShown+'</span>').prependTo(this.parent());jQuery('#'+targetId+'_left').on('click',function(event){targetObj.focus();});if(targetObj.objVal()==''){jQuery('#'+targetId+'_left').show();}
else{jQuery('#'+targetId+'_left').hide();}}
if(controls.right.enabled){var valueToBeShown='';if(controls.right.type=='simple'){valueToBeShown=controls.right.value;}
else if(controls.right.type=='componant'){var reference=jQuery('#'+controls.right.value);valueToBeShown=reference.objVal();reference.on('change',{"id":targetId},function(event){jQuery('#'+event.data.id+'_right ').html(jQuery(this).find('option:selected').text());});};jQuery('<span id="'+targetId+'_right" class="'+controls.right.classes+'">'+valueToBeShown+'</span>').prependTo(this.parent());jQuery('#'+targetId+'_right').on('click',function(event){targetObj.focus();});if(targetObj.objVal()==''){jQuery('#'+targetId+'_right').show();}
else{jQuery('#'+targetId+'_right').hide();}}}}}});